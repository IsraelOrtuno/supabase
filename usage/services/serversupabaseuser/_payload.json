[{"data":1,"prerenderedAt":671},["Reactive",2],{"navigation":3,"/usage/services/serversupabaseuser":52,"/usage/services/serversupabaseuser-surround":665},[4,8,12,40,44,48],{"title":5,"_path":6,"icon":7},"Get Started","/get-started","i-heroicons-rocket-launch",{"title":9,"_path":10,"icon":11},"Authentication","/authentication","i-heroicons-lock-closed",{"title":13,"_path":14,"children":15,"icon":39},"Usage","/usage",[16,26],{"title":17,"_path":18,"children":19},"Vue composables","/usage/composables",[20,23],{"title":21,"_path":22},"useSupabaseClient","/usage/composables/usesupabaseclient",{"title":24,"_path":25},"useSupabaseUser","/usage/composables/usesupabaseuser",{"title":27,"_path":28,"children":29},"Server services","/usage/services",[30,33,36],{"title":31,"_path":32},"serverSupabaseClient","/usage/services/serversupabaseclient",{"title":34,"_path":35},"serverSupabaseServiceRole","/usage/services/serversupabaseservicerole",{"title":37,"_path":38},"serverSupabaseUser","/usage/services/serversupabaseuser","heroicons:book-open",{"title":41,"_path":42,"icon":43},"Demo","/demo","i-heroicons-computer-desktop-20-solid",{"title":45,"_path":46,"icon":47},"Changelog","/changelog","i-heroicons-bookmark",{"title":49,"_path":50,"icon":51},"Roadmap","/roadmap","i-heroicons-map",{"_path":38,"_dir":53,"_draft":54,"_partial":54,"_locale":55,"title":37,"description":56,"body":57,"_type":660,"_id":661,"_source":662,"_file":663,"_extension":664},"services",false,"","Get your Supabase user from serverside with the serverSupabaseUser service",{"type":58,"children":59,"toc":658},"root",[60,85,105,125,297,302,448,462,652],{"type":61,"tag":62,"props":63,"children":66},"element","callout",{"color":64,"icon":65},"amber","i-heroicons-exclamation-triangle-20-solid",[67],{"type":61,"tag":68,"props":69,"children":70},"p",{},[71,74,83],{"type":72,"value":73},"text","This section assumes you're familiar with ",{"type":61,"tag":75,"props":76,"children":80},"a",{"href":77,"rel":78},"https://v3.nuxtjs.org/guide/concepts/server-engine",[79],"nofollow",[81],{"type":72,"value":82},"Nitro",{"type":72,"value":84},", the server engine powered by Nuxt.",{"type":61,"tag":68,"props":86,"children":87},{},[88,90,94,96,103],{"type":72,"value":89},"This function is similar to the ",{"type":61,"tag":75,"props":91,"children":92},{"href":25},[93],{"type":72,"value":24},{"type":72,"value":95}," composable but is used in ",{"type":61,"tag":75,"props":97,"children":100},{"href":98,"rel":99},"https://nuxt.com/docs/guide/directory-structure/server#server-routes",[79],[101],{"type":72,"value":102},"server routes",{"type":72,"value":104},".",{"type":61,"tag":68,"props":106,"children":107},{},[108,110,116,118,124],{"type":72,"value":109},"Define your server route and import the ",{"type":61,"tag":111,"props":112,"children":114},"code",{"className":113},[],[115],{"type":72,"value":37},{"type":72,"value":117}," from ",{"type":61,"tag":111,"props":119,"children":121},{"className":120},[],[122],{"type":72,"value":123},"#supabase/server",{"type":72,"value":104},{"type":61,"tag":126,"props":127,"children":132},"pre",{"className":128,"code":129,"filename":130,"language":131,"meta":55,"style":55},"language-ts shiki shiki-themes material-theme-lighter material-theme material-theme-palenight","import { serverSupabaseUser } from '#supabase/server'\n\nexport default defineEventHandler(async (event) => {\n  return await serverSupabaseUser(event)\n})\n","server/api/me.ts","ts",[133],{"type":61,"tag":111,"props":134,"children":135},{"__ignoreMap":55},[136,185,195,252,284],{"type":61,"tag":137,"props":138,"children":141},"span",{"class":139,"line":140},"line",1,[142,148,154,160,165,170,175,180],{"type":61,"tag":137,"props":143,"children":145},{"style":144},"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF;--shiki-light-font-style:italic;--shiki-default-font-style:italic;--shiki-dark-font-style:italic",[146],{"type":72,"value":147},"import",{"type":61,"tag":137,"props":149,"children":151},{"style":150},"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF",[152],{"type":72,"value":153}," {",{"type":61,"tag":137,"props":155,"children":157},{"style":156},"--shiki-light:#90A4AE;--shiki-default:#EEFFFF;--shiki-dark:#BABED8",[158],{"type":72,"value":159}," serverSupabaseUser",{"type":61,"tag":137,"props":161,"children":162},{"style":150},[163],{"type":72,"value":164}," }",{"type":61,"tag":137,"props":166,"children":167},{"style":144},[168],{"type":72,"value":169}," from",{"type":61,"tag":137,"props":171,"children":172},{"style":150},[173],{"type":72,"value":174}," '",{"type":61,"tag":137,"props":176,"children":178},{"style":177},"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D",[179],{"type":72,"value":123},{"type":61,"tag":137,"props":181,"children":182},{"style":150},[183],{"type":72,"value":184},"'\n",{"type":61,"tag":137,"props":186,"children":188},{"class":139,"line":187},2,[189],{"type":61,"tag":137,"props":190,"children":192},{"emptyLinePlaceholder":191},true,[193],{"type":72,"value":194},"\n",{"type":61,"tag":137,"props":196,"children":198},{"class":139,"line":197},3,[199,204,209,215,220,226,231,237,242,247],{"type":61,"tag":137,"props":200,"children":201},{"style":144},[202],{"type":72,"value":203},"export",{"type":61,"tag":137,"props":205,"children":206},{"style":144},[207],{"type":72,"value":208}," default",{"type":61,"tag":137,"props":210,"children":212},{"style":211},"--shiki-light:#6182B8;--shiki-default:#82AAFF;--shiki-dark:#82AAFF",[213],{"type":72,"value":214}," defineEventHandler",{"type":61,"tag":137,"props":216,"children":217},{"style":156},[218],{"type":72,"value":219},"(",{"type":61,"tag":137,"props":221,"children":223},{"style":222},"--shiki-light:#9C3EDA;--shiki-default:#C792EA;--shiki-dark:#C792EA",[224],{"type":72,"value":225},"async",{"type":61,"tag":137,"props":227,"children":228},{"style":150},[229],{"type":72,"value":230}," (",{"type":61,"tag":137,"props":232,"children":234},{"style":233},"--shiki-light:#90A4AE;--shiki-default:#EEFFFF;--shiki-dark:#BABED8;--shiki-light-font-style:italic;--shiki-default-font-style:italic;--shiki-dark-font-style:italic",[235],{"type":72,"value":236},"event",{"type":61,"tag":137,"props":238,"children":239},{"style":150},[240],{"type":72,"value":241},")",{"type":61,"tag":137,"props":243,"children":244},{"style":222},[245],{"type":72,"value":246}," =>",{"type":61,"tag":137,"props":248,"children":249},{"style":150},[250],{"type":72,"value":251}," {\n",{"type":61,"tag":137,"props":253,"children":255},{"class":139,"line":254},4,[256,261,266,270,275,279],{"type":61,"tag":137,"props":257,"children":258},{"style":144},[259],{"type":72,"value":260},"  return",{"type":61,"tag":137,"props":262,"children":263},{"style":144},[264],{"type":72,"value":265}," await",{"type":61,"tag":137,"props":267,"children":268},{"style":211},[269],{"type":72,"value":159},{"type":61,"tag":137,"props":271,"children":273},{"style":272},"--shiki-light:#E53935;--shiki-default:#F07178;--shiki-dark:#F07178",[274],{"type":72,"value":219},{"type":61,"tag":137,"props":276,"children":277},{"style":156},[278],{"type":72,"value":236},{"type":61,"tag":137,"props":280,"children":281},{"style":272},[282],{"type":72,"value":283},")\n",{"type":61,"tag":137,"props":285,"children":287},{"class":139,"line":286},5,[288,293],{"type":61,"tag":137,"props":289,"children":290},{"style":150},[291],{"type":72,"value":292},"}",{"type":61,"tag":137,"props":294,"children":295},{"style":156},[296],{"type":72,"value":283},{"type":61,"tag":68,"props":298,"children":299},{},[300],{"type":72,"value":301},"Then call your api route from any vue file:",{"type":61,"tag":126,"props":303,"children":306},{"className":128,"code":304,"filename":305,"language":131,"meta":55,"style":55},"const user = ref(null)\n\nconst fetchMe = async () => {\n   user.value = await $fetch('/api/me')\n}\n","pages/index.vue",[307],{"type":61,"tag":111,"props":308,"children":309},{"__ignoreMap":55},[310,346,353,387,440],{"type":61,"tag":137,"props":311,"children":312},{"class":139,"line":140},[313,318,323,328,333,337,342],{"type":61,"tag":137,"props":314,"children":315},{"style":222},[316],{"type":72,"value":317},"const",{"type":61,"tag":137,"props":319,"children":320},{"style":156},[321],{"type":72,"value":322}," user ",{"type":61,"tag":137,"props":324,"children":325},{"style":150},[326],{"type":72,"value":327},"=",{"type":61,"tag":137,"props":329,"children":330},{"style":211},[331],{"type":72,"value":332}," ref",{"type":61,"tag":137,"props":334,"children":335},{"style":156},[336],{"type":72,"value":219},{"type":61,"tag":137,"props":338,"children":339},{"style":150},[340],{"type":72,"value":341},"null",{"type":61,"tag":137,"props":343,"children":344},{"style":156},[345],{"type":72,"value":283},{"type":61,"tag":137,"props":347,"children":348},{"class":139,"line":187},[349],{"type":61,"tag":137,"props":350,"children":351},{"emptyLinePlaceholder":191},[352],{"type":72,"value":194},{"type":61,"tag":137,"props":354,"children":355},{"class":139,"line":197},[356,360,365,369,374,379,383],{"type":61,"tag":137,"props":357,"children":358},{"style":222},[359],{"type":72,"value":317},{"type":61,"tag":137,"props":361,"children":362},{"style":156},[363],{"type":72,"value":364}," fetchMe ",{"type":61,"tag":137,"props":366,"children":367},{"style":150},[368],{"type":72,"value":327},{"type":61,"tag":137,"props":370,"children":371},{"style":222},[372],{"type":72,"value":373}," async",{"type":61,"tag":137,"props":375,"children":376},{"style":150},[377],{"type":72,"value":378}," ()",{"type":61,"tag":137,"props":380,"children":381},{"style":222},[382],{"type":72,"value":246},{"type":61,"tag":137,"props":384,"children":385},{"style":150},[386],{"type":72,"value":251},{"type":61,"tag":137,"props":388,"children":389},{"class":139,"line":254},[390,395,399,404,409,413,418,422,427,432,436],{"type":61,"tag":137,"props":391,"children":392},{"style":156},[393],{"type":72,"value":394},"   user",{"type":61,"tag":137,"props":396,"children":397},{"style":150},[398],{"type":72,"value":104},{"type":61,"tag":137,"props":400,"children":401},{"style":156},[402],{"type":72,"value":403},"value",{"type":61,"tag":137,"props":405,"children":406},{"style":150},[407],{"type":72,"value":408}," =",{"type":61,"tag":137,"props":410,"children":411},{"style":144},[412],{"type":72,"value":265},{"type":61,"tag":137,"props":414,"children":415},{"style":211},[416],{"type":72,"value":417}," $fetch",{"type":61,"tag":137,"props":419,"children":420},{"style":272},[421],{"type":72,"value":219},{"type":61,"tag":137,"props":423,"children":424},{"style":150},[425],{"type":72,"value":426},"'",{"type":61,"tag":137,"props":428,"children":429},{"style":177},[430],{"type":72,"value":431},"/api/me",{"type":61,"tag":137,"props":433,"children":434},{"style":150},[435],{"type":72,"value":426},{"type":61,"tag":137,"props":437,"children":438},{"style":272},[439],{"type":72,"value":283},{"type":61,"tag":137,"props":441,"children":442},{"class":139,"line":286},[443],{"type":61,"tag":137,"props":444,"children":445},{"style":150},[446],{"type":72,"value":447},"}\n",{"type":61,"tag":68,"props":449,"children":450},{},[451,453,460],{"type":72,"value":452},"Be careful, if you want to call this route on SSR, please read this ",{"type":61,"tag":75,"props":454,"children":457},{"href":455,"rel":456},"https://nuxt.com/docs/getting-started/data-fetching#isomorphic-fetch-and-fetch",[79],[458],{"type":72,"value":459},"section",{"type":72,"value":461},", you must send your browser cookies including your supabase token.",{"type":61,"tag":126,"props":463,"children":465},{"className":128,"code":464,"filename":305,"language":131,"meta":55,"style":55},"const user = ref(null)\n\nconst { data } = await useFetch('/api/me', {\n  headers: useRequestHeaders(['cookie'])\n})\n\nuser.value = data\n",[466],{"type":61,"tag":111,"props":467,"children":468},{"__ignoreMap":55},[469,500,507,565,606,617,625],{"type":61,"tag":137,"props":470,"children":471},{"class":139,"line":140},[472,476,480,484,488,492,496],{"type":61,"tag":137,"props":473,"children":474},{"style":222},[475],{"type":72,"value":317},{"type":61,"tag":137,"props":477,"children":478},{"style":156},[479],{"type":72,"value":322},{"type":61,"tag":137,"props":481,"children":482},{"style":150},[483],{"type":72,"value":327},{"type":61,"tag":137,"props":485,"children":486},{"style":211},[487],{"type":72,"value":332},{"type":61,"tag":137,"props":489,"children":490},{"style":156},[491],{"type":72,"value":219},{"type":61,"tag":137,"props":493,"children":494},{"style":150},[495],{"type":72,"value":341},{"type":61,"tag":137,"props":497,"children":498},{"style":156},[499],{"type":72,"value":283},{"type":61,"tag":137,"props":501,"children":502},{"class":139,"line":187},[503],{"type":61,"tag":137,"props":504,"children":505},{"emptyLinePlaceholder":191},[506],{"type":72,"value":194},{"type":61,"tag":137,"props":508,"children":509},{"class":139,"line":197},[510,514,518,523,527,531,535,540,544,548,552,556,561],{"type":61,"tag":137,"props":511,"children":512},{"style":222},[513],{"type":72,"value":317},{"type":61,"tag":137,"props":515,"children":516},{"style":150},[517],{"type":72,"value":153},{"type":61,"tag":137,"props":519,"children":520},{"style":156},[521],{"type":72,"value":522}," data ",{"type":61,"tag":137,"props":524,"children":525},{"style":150},[526],{"type":72,"value":292},{"type":61,"tag":137,"props":528,"children":529},{"style":150},[530],{"type":72,"value":408},{"type":61,"tag":137,"props":532,"children":533},{"style":144},[534],{"type":72,"value":265},{"type":61,"tag":137,"props":536,"children":537},{"style":211},[538],{"type":72,"value":539}," useFetch",{"type":61,"tag":137,"props":541,"children":542},{"style":156},[543],{"type":72,"value":219},{"type":61,"tag":137,"props":545,"children":546},{"style":150},[547],{"type":72,"value":426},{"type":61,"tag":137,"props":549,"children":550},{"style":177},[551],{"type":72,"value":431},{"type":61,"tag":137,"props":553,"children":554},{"style":150},[555],{"type":72,"value":426},{"type":61,"tag":137,"props":557,"children":558},{"style":150},[559],{"type":72,"value":560},",",{"type":61,"tag":137,"props":562,"children":563},{"style":150},[564],{"type":72,"value":251},{"type":61,"tag":137,"props":566,"children":567},{"class":139,"line":254},[568,573,578,583,588,592,597,601],{"type":61,"tag":137,"props":569,"children":570},{"style":272},[571],{"type":72,"value":572},"  headers",{"type":61,"tag":137,"props":574,"children":575},{"style":150},[576],{"type":72,"value":577},":",{"type":61,"tag":137,"props":579,"children":580},{"style":211},[581],{"type":72,"value":582}," useRequestHeaders",{"type":61,"tag":137,"props":584,"children":585},{"style":156},[586],{"type":72,"value":587},"([",{"type":61,"tag":137,"props":589,"children":590},{"style":150},[591],{"type":72,"value":426},{"type":61,"tag":137,"props":593,"children":594},{"style":177},[595],{"type":72,"value":596},"cookie",{"type":61,"tag":137,"props":598,"children":599},{"style":150},[600],{"type":72,"value":426},{"type":61,"tag":137,"props":602,"children":603},{"style":156},[604],{"type":72,"value":605},"])\n",{"type":61,"tag":137,"props":607,"children":608},{"class":139,"line":286},[609,613],{"type":61,"tag":137,"props":610,"children":611},{"style":150},[612],{"type":72,"value":292},{"type":61,"tag":137,"props":614,"children":615},{"style":156},[616],{"type":72,"value":283},{"type":61,"tag":137,"props":618,"children":620},{"class":139,"line":619},6,[621],{"type":61,"tag":137,"props":622,"children":623},{"emptyLinePlaceholder":191},[624],{"type":72,"value":194},{"type":61,"tag":137,"props":626,"children":628},{"class":139,"line":627},7,[629,634,638,643,647],{"type":61,"tag":137,"props":630,"children":631},{"style":156},[632],{"type":72,"value":633},"user",{"type":61,"tag":137,"props":635,"children":636},{"style":150},[637],{"type":72,"value":104},{"type":61,"tag":137,"props":639,"children":640},{"style":156},[641],{"type":72,"value":642},"value ",{"type":61,"tag":137,"props":644,"children":645},{"style":150},[646],{"type":72,"value":327},{"type":61,"tag":137,"props":648,"children":649},{"style":156},[650],{"type":72,"value":651}," data\n",{"type":61,"tag":653,"props":654,"children":655},"style",{},[656],{"type":72,"value":657},"html .light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html.light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}",{"title":55,"searchDepth":187,"depth":187,"links":659},[],"markdown","content:4.usage:services:3.serverSupabaseUser.md","content","4.usage/services/3.serverSupabaseUser.md","md",[666,669],{"_path":35,"title":667,"description":668},"serverServiceRole","Make requests with super admin rights to the Supabase API with the serverSupabaseServiceRole service",{"_path":42,"title":41,"description":670},"Demonstration of using Supabase with Nuxt.",1709806276402]