[{"data":1,"prerenderedAt":669},["Reactive",2],{"navigation":3,"/usage/services/serversupabaseuser":52,"/usage/services/serversupabaseuser-surround":663},[4,8,12,40,44,48],{"title":5,"_path":6,"icon":7},"Get Started","/get-started","heroicons:rocket-launch",{"title":9,"_path":10,"icon":11},"Authentication","/authentication","heroicons:lock-closed",{"title":13,"_path":14,"children":15,"icon":39},"Usage","/usage",[16,26],{"title":17,"_path":18,"children":19},"Vue composables","/usage/composables",[20,23],{"title":21,"_path":22},"useSupabaseClient","/usage/composables/usesupabaseclient",{"title":24,"_path":25},"useSupabaseUser","/usage/composables/usesupabaseuser",{"title":27,"_path":28,"children":29},"Server services","/usage/services",[30,33,36],{"title":31,"_path":32},"serverSupabaseClient","/usage/services/serversupabaseclient",{"title":34,"_path":35},"serverSupabaseServiceRole","/usage/services/serversupabaseservicerole",{"title":37,"_path":38},"serverSupabaseUser","/usage/services/serversupabaseuser","heroicons:book-open",{"title":41,"_path":42,"icon":43},"Demo","/demo","heroicons:computer-desktop-20-solid",{"title":45,"_path":46,"icon":47},"Changelog","/changelog","heroicons:bookmark",{"title":49,"_path":50,"icon":51},"Roadmap","/roadmap","heroicons:map",{"_path":38,"_dir":53,"_draft":54,"_partial":54,"_locale":55,"title":37,"description":56,"body":57,"_type":658,"_id":659,"_source":660,"_file":661,"_extension":662},"services",false,"","Get your Supabase user from serverside with the serverSupabaseUser service",{"type":58,"children":59,"toc":656},"root",[60,85,105,123,295,300,446,460,650],{"type":61,"tag":62,"props":63,"children":66},"element","callout",{"color":64,"icon":65},"amber","i-heroicons-exclamation-triangle-20-solid",[67],{"type":61,"tag":68,"props":69,"children":70},"p",{},[71,74,83],{"type":72,"value":73},"text","This section assumes you're familiar with ",{"type":61,"tag":75,"props":76,"children":80},"a",{"href":77,"rel":78},"https://v3.nuxtjs.org/guide/concepts/server-engine",[79],"nofollow",[81],{"type":72,"value":82},"Nitro",{"type":72,"value":84},", the server engine powered by Nuxt.",{"type":61,"tag":68,"props":86,"children":87},{},[88,90,94,96,103],{"type":72,"value":89},"This function is similar to the ",{"type":61,"tag":75,"props":91,"children":92},{"href":25},[93],{"type":72,"value":24},{"type":72,"value":95}," composable but is used in ",{"type":61,"tag":75,"props":97,"children":100},{"href":98,"rel":99},"https://nuxt.com/docs/guide/directory-structure/server#server-routes",[79],[101],{"type":72,"value":102},"server routes",{"type":72,"value":104},".",{"type":61,"tag":68,"props":106,"children":107},{},[108,110,115,117,122],{"type":72,"value":109},"Define your server route and import the ",{"type":61,"tag":111,"props":112,"children":113},"code",{"className":55},[114],{"type":72,"value":37},{"type":72,"value":116}," from ",{"type":61,"tag":111,"props":118,"children":119},{"className":55},[120],{"type":72,"value":121},"#supabase/server",{"type":72,"value":104},{"type":61,"tag":124,"props":125,"children":130},"pre",{"className":126,"code":127,"filename":128,"language":129,"meta":55,"style":55},"language-ts shiki shiki-themes material-theme-lighter material-theme material-theme-palenight","import { serverSupabaseUser } from '#supabase/server'\n\nexport default defineEventHandler(async (event) => {\n  return await serverSupabaseUser(event)\n})\n","server/api/me.ts","ts",[131],{"type":61,"tag":111,"props":132,"children":133},{"__ignoreMap":55},[134,183,193,250,282],{"type":61,"tag":135,"props":136,"children":139},"span",{"class":137,"line":138},"line",1,[140,146,152,158,163,168,173,178],{"type":61,"tag":135,"props":141,"children":143},{"style":142},"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF;--shiki-light-font-style:italic;--shiki-default-font-style:italic;--shiki-dark-font-style:italic",[144],{"type":72,"value":145},"import",{"type":61,"tag":135,"props":147,"children":149},{"style":148},"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF",[150],{"type":72,"value":151}," {",{"type":61,"tag":135,"props":153,"children":155},{"style":154},"--shiki-light:#90A4AE;--shiki-default:#EEFFFF;--shiki-dark:#BABED8",[156],{"type":72,"value":157}," serverSupabaseUser",{"type":61,"tag":135,"props":159,"children":160},{"style":148},[161],{"type":72,"value":162}," }",{"type":61,"tag":135,"props":164,"children":165},{"style":142},[166],{"type":72,"value":167}," from",{"type":61,"tag":135,"props":169,"children":170},{"style":148},[171],{"type":72,"value":172}," '",{"type":61,"tag":135,"props":174,"children":176},{"style":175},"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D",[177],{"type":72,"value":121},{"type":61,"tag":135,"props":179,"children":180},{"style":148},[181],{"type":72,"value":182},"'\n",{"type":61,"tag":135,"props":184,"children":186},{"class":137,"line":185},2,[187],{"type":61,"tag":135,"props":188,"children":190},{"emptyLinePlaceholder":189},true,[191],{"type":72,"value":192},"\n",{"type":61,"tag":135,"props":194,"children":196},{"class":137,"line":195},3,[197,202,207,213,218,224,229,235,240,245],{"type":61,"tag":135,"props":198,"children":199},{"style":142},[200],{"type":72,"value":201},"export",{"type":61,"tag":135,"props":203,"children":204},{"style":142},[205],{"type":72,"value":206}," default",{"type":61,"tag":135,"props":208,"children":210},{"style":209},"--shiki-light:#6182B8;--shiki-default:#82AAFF;--shiki-dark:#82AAFF",[211],{"type":72,"value":212}," defineEventHandler",{"type":61,"tag":135,"props":214,"children":215},{"style":154},[216],{"type":72,"value":217},"(",{"type":61,"tag":135,"props":219,"children":221},{"style":220},"--shiki-light:#9C3EDA;--shiki-default:#C792EA;--shiki-dark:#C792EA",[222],{"type":72,"value":223},"async",{"type":61,"tag":135,"props":225,"children":226},{"style":148},[227],{"type":72,"value":228}," (",{"type":61,"tag":135,"props":230,"children":232},{"style":231},"--shiki-light:#90A4AE;--shiki-default:#EEFFFF;--shiki-dark:#BABED8;--shiki-light-font-style:italic;--shiki-default-font-style:italic;--shiki-dark-font-style:italic",[233],{"type":72,"value":234},"event",{"type":61,"tag":135,"props":236,"children":237},{"style":148},[238],{"type":72,"value":239},")",{"type":61,"tag":135,"props":241,"children":242},{"style":220},[243],{"type":72,"value":244}," =>",{"type":61,"tag":135,"props":246,"children":247},{"style":148},[248],{"type":72,"value":249}," {\n",{"type":61,"tag":135,"props":251,"children":253},{"class":137,"line":252},4,[254,259,264,268,273,277],{"type":61,"tag":135,"props":255,"children":256},{"style":142},[257],{"type":72,"value":258},"  return",{"type":61,"tag":135,"props":260,"children":261},{"style":142},[262],{"type":72,"value":263}," await",{"type":61,"tag":135,"props":265,"children":266},{"style":209},[267],{"type":72,"value":157},{"type":61,"tag":135,"props":269,"children":271},{"style":270},"--shiki-light:#E53935;--shiki-default:#F07178;--shiki-dark:#F07178",[272],{"type":72,"value":217},{"type":61,"tag":135,"props":274,"children":275},{"style":154},[276],{"type":72,"value":234},{"type":61,"tag":135,"props":278,"children":279},{"style":270},[280],{"type":72,"value":281},")\n",{"type":61,"tag":135,"props":283,"children":285},{"class":137,"line":284},5,[286,291],{"type":61,"tag":135,"props":287,"children":288},{"style":148},[289],{"type":72,"value":290},"}",{"type":61,"tag":135,"props":292,"children":293},{"style":154},[294],{"type":72,"value":281},{"type":61,"tag":68,"props":296,"children":297},{},[298],{"type":72,"value":299},"Then call your api route from any vue file:",{"type":61,"tag":124,"props":301,"children":304},{"className":126,"code":302,"filename":303,"language":129,"meta":55,"style":55},"const user = ref(null)\n\nconst fetchMe = async () => {\n   user.value = await $fetch('/api/me')\n}\n","pages/index.vue",[305],{"type":61,"tag":111,"props":306,"children":307},{"__ignoreMap":55},[308,344,351,385,438],{"type":61,"tag":135,"props":309,"children":310},{"class":137,"line":138},[311,316,321,326,331,335,340],{"type":61,"tag":135,"props":312,"children":313},{"style":220},[314],{"type":72,"value":315},"const",{"type":61,"tag":135,"props":317,"children":318},{"style":154},[319],{"type":72,"value":320}," user ",{"type":61,"tag":135,"props":322,"children":323},{"style":148},[324],{"type":72,"value":325},"=",{"type":61,"tag":135,"props":327,"children":328},{"style":209},[329],{"type":72,"value":330}," ref",{"type":61,"tag":135,"props":332,"children":333},{"style":154},[334],{"type":72,"value":217},{"type":61,"tag":135,"props":336,"children":337},{"style":148},[338],{"type":72,"value":339},"null",{"type":61,"tag":135,"props":341,"children":342},{"style":154},[343],{"type":72,"value":281},{"type":61,"tag":135,"props":345,"children":346},{"class":137,"line":185},[347],{"type":61,"tag":135,"props":348,"children":349},{"emptyLinePlaceholder":189},[350],{"type":72,"value":192},{"type":61,"tag":135,"props":352,"children":353},{"class":137,"line":195},[354,358,363,367,372,377,381],{"type":61,"tag":135,"props":355,"children":356},{"style":220},[357],{"type":72,"value":315},{"type":61,"tag":135,"props":359,"children":360},{"style":154},[361],{"type":72,"value":362}," fetchMe ",{"type":61,"tag":135,"props":364,"children":365},{"style":148},[366],{"type":72,"value":325},{"type":61,"tag":135,"props":368,"children":369},{"style":220},[370],{"type":72,"value":371}," async",{"type":61,"tag":135,"props":373,"children":374},{"style":148},[375],{"type":72,"value":376}," ()",{"type":61,"tag":135,"props":378,"children":379},{"style":220},[380],{"type":72,"value":244},{"type":61,"tag":135,"props":382,"children":383},{"style":148},[384],{"type":72,"value":249},{"type":61,"tag":135,"props":386,"children":387},{"class":137,"line":252},[388,393,397,402,407,411,416,420,425,430,434],{"type":61,"tag":135,"props":389,"children":390},{"style":154},[391],{"type":72,"value":392},"   user",{"type":61,"tag":135,"props":394,"children":395},{"style":148},[396],{"type":72,"value":104},{"type":61,"tag":135,"props":398,"children":399},{"style":154},[400],{"type":72,"value":401},"value",{"type":61,"tag":135,"props":403,"children":404},{"style":148},[405],{"type":72,"value":406}," =",{"type":61,"tag":135,"props":408,"children":409},{"style":142},[410],{"type":72,"value":263},{"type":61,"tag":135,"props":412,"children":413},{"style":209},[414],{"type":72,"value":415}," $fetch",{"type":61,"tag":135,"props":417,"children":418},{"style":270},[419],{"type":72,"value":217},{"type":61,"tag":135,"props":421,"children":422},{"style":148},[423],{"type":72,"value":424},"'",{"type":61,"tag":135,"props":426,"children":427},{"style":175},[428],{"type":72,"value":429},"/api/me",{"type":61,"tag":135,"props":431,"children":432},{"style":148},[433],{"type":72,"value":424},{"type":61,"tag":135,"props":435,"children":436},{"style":270},[437],{"type":72,"value":281},{"type":61,"tag":135,"props":439,"children":440},{"class":137,"line":284},[441],{"type":61,"tag":135,"props":442,"children":443},{"style":148},[444],{"type":72,"value":445},"}\n",{"type":61,"tag":68,"props":447,"children":448},{},[449,451,458],{"type":72,"value":450},"Be careful, if you want to call this route on SSR, please read this ",{"type":61,"tag":75,"props":452,"children":455},{"href":453,"rel":454},"https://nuxt.com/docs/getting-started/data-fetching#isomorphic-fetch-and-fetch",[79],[456],{"type":72,"value":457},"section",{"type":72,"value":459},", you must send your browser cookies including your supabase token.",{"type":61,"tag":124,"props":461,"children":463},{"className":126,"code":462,"filename":303,"language":129,"meta":55,"style":55},"const user = ref(null)\n\nconst { data } = await useFetch('/api/me', {\n  headers: useRequestHeaders(['cookie'])\n})\n\nuser.value = data\n",[464],{"type":61,"tag":111,"props":465,"children":466},{"__ignoreMap":55},[467,498,505,563,604,615,623],{"type":61,"tag":135,"props":468,"children":469},{"class":137,"line":138},[470,474,478,482,486,490,494],{"type":61,"tag":135,"props":471,"children":472},{"style":220},[473],{"type":72,"value":315},{"type":61,"tag":135,"props":475,"children":476},{"style":154},[477],{"type":72,"value":320},{"type":61,"tag":135,"props":479,"children":480},{"style":148},[481],{"type":72,"value":325},{"type":61,"tag":135,"props":483,"children":484},{"style":209},[485],{"type":72,"value":330},{"type":61,"tag":135,"props":487,"children":488},{"style":154},[489],{"type":72,"value":217},{"type":61,"tag":135,"props":491,"children":492},{"style":148},[493],{"type":72,"value":339},{"type":61,"tag":135,"props":495,"children":496},{"style":154},[497],{"type":72,"value":281},{"type":61,"tag":135,"props":499,"children":500},{"class":137,"line":185},[501],{"type":61,"tag":135,"props":502,"children":503},{"emptyLinePlaceholder":189},[504],{"type":72,"value":192},{"type":61,"tag":135,"props":506,"children":507},{"class":137,"line":195},[508,512,516,521,525,529,533,538,542,546,550,554,559],{"type":61,"tag":135,"props":509,"children":510},{"style":220},[511],{"type":72,"value":315},{"type":61,"tag":135,"props":513,"children":514},{"style":148},[515],{"type":72,"value":151},{"type":61,"tag":135,"props":517,"children":518},{"style":154},[519],{"type":72,"value":520}," data ",{"type":61,"tag":135,"props":522,"children":523},{"style":148},[524],{"type":72,"value":290},{"type":61,"tag":135,"props":526,"children":527},{"style":148},[528],{"type":72,"value":406},{"type":61,"tag":135,"props":530,"children":531},{"style":142},[532],{"type":72,"value":263},{"type":61,"tag":135,"props":534,"children":535},{"style":209},[536],{"type":72,"value":537}," useFetch",{"type":61,"tag":135,"props":539,"children":540},{"style":154},[541],{"type":72,"value":217},{"type":61,"tag":135,"props":543,"children":544},{"style":148},[545],{"type":72,"value":424},{"type":61,"tag":135,"props":547,"children":548},{"style":175},[549],{"type":72,"value":429},{"type":61,"tag":135,"props":551,"children":552},{"style":148},[553],{"type":72,"value":424},{"type":61,"tag":135,"props":555,"children":556},{"style":148},[557],{"type":72,"value":558},",",{"type":61,"tag":135,"props":560,"children":561},{"style":148},[562],{"type":72,"value":249},{"type":61,"tag":135,"props":564,"children":565},{"class":137,"line":252},[566,571,576,581,586,590,595,599],{"type":61,"tag":135,"props":567,"children":568},{"style":270},[569],{"type":72,"value":570},"  headers",{"type":61,"tag":135,"props":572,"children":573},{"style":148},[574],{"type":72,"value":575},":",{"type":61,"tag":135,"props":577,"children":578},{"style":209},[579],{"type":72,"value":580}," useRequestHeaders",{"type":61,"tag":135,"props":582,"children":583},{"style":154},[584],{"type":72,"value":585},"([",{"type":61,"tag":135,"props":587,"children":588},{"style":148},[589],{"type":72,"value":424},{"type":61,"tag":135,"props":591,"children":592},{"style":175},[593],{"type":72,"value":594},"cookie",{"type":61,"tag":135,"props":596,"children":597},{"style":148},[598],{"type":72,"value":424},{"type":61,"tag":135,"props":600,"children":601},{"style":154},[602],{"type":72,"value":603},"])\n",{"type":61,"tag":135,"props":605,"children":606},{"class":137,"line":284},[607,611],{"type":61,"tag":135,"props":608,"children":609},{"style":148},[610],{"type":72,"value":290},{"type":61,"tag":135,"props":612,"children":613},{"style":154},[614],{"type":72,"value":281},{"type":61,"tag":135,"props":616,"children":618},{"class":137,"line":617},6,[619],{"type":61,"tag":135,"props":620,"children":621},{"emptyLinePlaceholder":189},[622],{"type":72,"value":192},{"type":61,"tag":135,"props":624,"children":626},{"class":137,"line":625},7,[627,632,636,641,645],{"type":61,"tag":135,"props":628,"children":629},{"style":154},[630],{"type":72,"value":631},"user",{"type":61,"tag":135,"props":633,"children":634},{"style":148},[635],{"type":72,"value":104},{"type":61,"tag":135,"props":637,"children":638},{"style":154},[639],{"type":72,"value":640},"value ",{"type":61,"tag":135,"props":642,"children":643},{"style":148},[644],{"type":72,"value":325},{"type":61,"tag":135,"props":646,"children":647},{"style":154},[648],{"type":72,"value":649}," data\n",{"type":61,"tag":651,"props":652,"children":653},"style",{},[654],{"type":72,"value":655},"html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html.light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html .light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}",{"title":55,"searchDepth":185,"depth":185,"links":657},[],"markdown","content:4.usage:services:3.serverSupabaseUser.md","content","4.usage/services/3.serverSupabaseUser.md","md",[664,667],{"_path":35,"title":665,"description":666},"serverServiceRole","Make requests with super admin rights to the Supabase API with the serverSupabaseServiceRole service",{"_path":42,"title":41,"description":668},"Demonstration of using Supabase with Nuxt.",1700472071773]