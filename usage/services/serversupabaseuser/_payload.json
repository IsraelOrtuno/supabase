[{"data":1,"prerenderedAt":670},["Reactive",2],{"navigation":3,"/usage/services/serversupabaseuser":52,"/usage/services/serversupabaseuser-surround":664},[4,8,12,40,44,48],{"title":5,"_path":6,"icon":7},"Get Started","/get-started","heroicons:rocket-launch",{"title":9,"_path":10,"icon":11},"Authentication","/authentication","heroicons:lock-closed",{"title":13,"_path":14,"children":15,"icon":39},"Usage","/usage",[16,26],{"title":17,"_path":18,"children":19},"Vue composables","/usage/composables",[20,23],{"title":21,"_path":22},"UseSupabaseClient","/usage/composables/usesupabaseclient",{"title":24,"_path":25},"UseSupabaseUser","/usage/composables/usesupabaseuser",{"title":27,"_path":28,"children":29},"Server services","/usage/services",[30,33,36],{"title":31,"_path":32},"serverSupabaseClient","/usage/services/serversupabaseclient",{"title":34,"_path":35},"serverSupabaseServiceRole","/usage/services/serversupabaseservicerole",{"title":37,"_path":38},"serverSupabaseUser","/usage/services/serversupabaseuser","heroicons:book-open",{"title":41,"_path":42,"icon":43},"Demo","/demo","heroicons:computer-desktop-20-solid",{"title":45,"_path":46,"icon":47},"Changelog","/changelog","heroicons:bookmark",{"title":49,"_path":50,"icon":51},"Roadmap","/roadmap","heroicons:map",{"_path":38,"_dir":53,"_draft":54,"_partial":54,"_locale":55,"title":37,"description":56,"body":57,"_type":659,"_id":660,"_source":661,"_file":662,"_extension":663},"services",false,"","Get your Supabase user from serverside with the serverSupabaseUser service",{"type":58,"children":59,"toc":657},"root",[60,85,106,124,296,301,447,461,651],{"type":61,"tag":62,"props":63,"children":66},"element","callout",{"color":64,"icon":65},"amber","i-heroicons-exclamation-triangle-20-solid",[67],{"type":61,"tag":68,"props":69,"children":70},"p",{},[71,74,83],{"type":72,"value":73},"text","This section assumes you're familiar with ",{"type":61,"tag":75,"props":76,"children":80},"a",{"href":77,"rel":78},"https://v3.nuxtjs.org/guide/concepts/server-engine",[79],"nofollow",[81],{"type":72,"value":82},"Nitro",{"type":72,"value":84},", the server engine powered by Nuxt.",{"type":61,"tag":68,"props":86,"children":87},{},[88,90,95,97,104],{"type":72,"value":89},"This function is similar to the ",{"type":61,"tag":75,"props":91,"children":92},{"href":25},[93],{"type":72,"value":94},"useSupabaseUser",{"type":72,"value":96}," composable but is used in ",{"type":61,"tag":75,"props":98,"children":101},{"href":99,"rel":100},"https://nuxt.com/docs/guide/directory-structure/server#server-routes",[79],[102],{"type":72,"value":103},"server routes",{"type":72,"value":105},".",{"type":61,"tag":68,"props":107,"children":108},{},[109,111,116,118,123],{"type":72,"value":110},"Define your server route and import the ",{"type":61,"tag":112,"props":113,"children":114},"code",{"className":55},[115],{"type":72,"value":37},{"type":72,"value":117}," from ",{"type":61,"tag":112,"props":119,"children":120},{"className":55},[121],{"type":72,"value":122},"#supabase/server",{"type":72,"value":105},{"type":61,"tag":125,"props":126,"children":131},"pre",{"className":127,"code":128,"filename":129,"language":130,"meta":55,"style":55},"language-ts shiki shiki-themes material-theme-lighter material-theme material-theme-palenight","import { serverSupabaseUser } from '#supabase/server'\n\nexport default defineEventHandler(async (event) => {\n  return await serverSupabaseUser(event)\n})\n","server/api/me.ts","ts",[132],{"type":61,"tag":112,"props":133,"children":134},{"__ignoreMap":55},[135,184,194,251,283],{"type":61,"tag":136,"props":137,"children":140},"span",{"class":138,"line":139},"line",1,[141,147,153,159,164,169,174,179],{"type":61,"tag":136,"props":142,"children":144},{"style":143},"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF;--shiki-light-font-style:italic;--shiki-default-font-style:italic;--shiki-dark-font-style:italic",[145],{"type":72,"value":146},"import",{"type":61,"tag":136,"props":148,"children":150},{"style":149},"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF",[151],{"type":72,"value":152}," {",{"type":61,"tag":136,"props":154,"children":156},{"style":155},"--shiki-light:#90A4AE;--shiki-default:#EEFFFF;--shiki-dark:#BABED8",[157],{"type":72,"value":158}," serverSupabaseUser",{"type":61,"tag":136,"props":160,"children":161},{"style":149},[162],{"type":72,"value":163}," }",{"type":61,"tag":136,"props":165,"children":166},{"style":143},[167],{"type":72,"value":168}," from",{"type":61,"tag":136,"props":170,"children":171},{"style":149},[172],{"type":72,"value":173}," '",{"type":61,"tag":136,"props":175,"children":177},{"style":176},"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D",[178],{"type":72,"value":122},{"type":61,"tag":136,"props":180,"children":181},{"style":149},[182],{"type":72,"value":183},"'\n",{"type":61,"tag":136,"props":185,"children":187},{"class":138,"line":186},2,[188],{"type":61,"tag":136,"props":189,"children":191},{"emptyLinePlaceholder":190},true,[192],{"type":72,"value":193},"\n",{"type":61,"tag":136,"props":195,"children":197},{"class":138,"line":196},3,[198,203,208,214,219,225,230,236,241,246],{"type":61,"tag":136,"props":199,"children":200},{"style":143},[201],{"type":72,"value":202},"export",{"type":61,"tag":136,"props":204,"children":205},{"style":143},[206],{"type":72,"value":207}," default",{"type":61,"tag":136,"props":209,"children":211},{"style":210},"--shiki-light:#6182B8;--shiki-default:#82AAFF;--shiki-dark:#82AAFF",[212],{"type":72,"value":213}," defineEventHandler",{"type":61,"tag":136,"props":215,"children":216},{"style":155},[217],{"type":72,"value":218},"(",{"type":61,"tag":136,"props":220,"children":222},{"style":221},"--shiki-light:#9C3EDA;--shiki-default:#C792EA;--shiki-dark:#C792EA",[223],{"type":72,"value":224},"async",{"type":61,"tag":136,"props":226,"children":227},{"style":149},[228],{"type":72,"value":229}," (",{"type":61,"tag":136,"props":231,"children":233},{"style":232},"--shiki-light:#90A4AE;--shiki-default:#EEFFFF;--shiki-dark:#BABED8;--shiki-light-font-style:italic;--shiki-default-font-style:italic;--shiki-dark-font-style:italic",[234],{"type":72,"value":235},"event",{"type":61,"tag":136,"props":237,"children":238},{"style":149},[239],{"type":72,"value":240},")",{"type":61,"tag":136,"props":242,"children":243},{"style":221},[244],{"type":72,"value":245}," =>",{"type":61,"tag":136,"props":247,"children":248},{"style":149},[249],{"type":72,"value":250}," {\n",{"type":61,"tag":136,"props":252,"children":254},{"class":138,"line":253},4,[255,260,265,269,274,278],{"type":61,"tag":136,"props":256,"children":257},{"style":143},[258],{"type":72,"value":259},"  return",{"type":61,"tag":136,"props":261,"children":262},{"style":143},[263],{"type":72,"value":264}," await",{"type":61,"tag":136,"props":266,"children":267},{"style":210},[268],{"type":72,"value":158},{"type":61,"tag":136,"props":270,"children":272},{"style":271},"--shiki-light:#E53935;--shiki-default:#F07178;--shiki-dark:#F07178",[273],{"type":72,"value":218},{"type":61,"tag":136,"props":275,"children":276},{"style":155},[277],{"type":72,"value":235},{"type":61,"tag":136,"props":279,"children":280},{"style":271},[281],{"type":72,"value":282},")\n",{"type":61,"tag":136,"props":284,"children":286},{"class":138,"line":285},5,[287,292],{"type":61,"tag":136,"props":288,"children":289},{"style":149},[290],{"type":72,"value":291},"}",{"type":61,"tag":136,"props":293,"children":294},{"style":155},[295],{"type":72,"value":282},{"type":61,"tag":68,"props":297,"children":298},{},[299],{"type":72,"value":300},"Then call your api route from any vue file:",{"type":61,"tag":125,"props":302,"children":305},{"className":127,"code":303,"filename":304,"language":130,"meta":55,"style":55},"const user = ref(null)\n\nconst fetchMe = async () => {\n   user.value = await $fetch('/api/me')\n}\n","pages/index.vue",[306],{"type":61,"tag":112,"props":307,"children":308},{"__ignoreMap":55},[309,345,352,386,439],{"type":61,"tag":136,"props":310,"children":311},{"class":138,"line":139},[312,317,322,327,332,336,341],{"type":61,"tag":136,"props":313,"children":314},{"style":221},[315],{"type":72,"value":316},"const",{"type":61,"tag":136,"props":318,"children":319},{"style":155},[320],{"type":72,"value":321}," user ",{"type":61,"tag":136,"props":323,"children":324},{"style":149},[325],{"type":72,"value":326},"=",{"type":61,"tag":136,"props":328,"children":329},{"style":210},[330],{"type":72,"value":331}," ref",{"type":61,"tag":136,"props":333,"children":334},{"style":155},[335],{"type":72,"value":218},{"type":61,"tag":136,"props":337,"children":338},{"style":149},[339],{"type":72,"value":340},"null",{"type":61,"tag":136,"props":342,"children":343},{"style":155},[344],{"type":72,"value":282},{"type":61,"tag":136,"props":346,"children":347},{"class":138,"line":186},[348],{"type":61,"tag":136,"props":349,"children":350},{"emptyLinePlaceholder":190},[351],{"type":72,"value":193},{"type":61,"tag":136,"props":353,"children":354},{"class":138,"line":196},[355,359,364,368,373,378,382],{"type":61,"tag":136,"props":356,"children":357},{"style":221},[358],{"type":72,"value":316},{"type":61,"tag":136,"props":360,"children":361},{"style":155},[362],{"type":72,"value":363}," fetchMe ",{"type":61,"tag":136,"props":365,"children":366},{"style":149},[367],{"type":72,"value":326},{"type":61,"tag":136,"props":369,"children":370},{"style":221},[371],{"type":72,"value":372}," async",{"type":61,"tag":136,"props":374,"children":375},{"style":149},[376],{"type":72,"value":377}," ()",{"type":61,"tag":136,"props":379,"children":380},{"style":221},[381],{"type":72,"value":245},{"type":61,"tag":136,"props":383,"children":384},{"style":149},[385],{"type":72,"value":250},{"type":61,"tag":136,"props":387,"children":388},{"class":138,"line":253},[389,394,398,403,408,412,417,421,426,431,435],{"type":61,"tag":136,"props":390,"children":391},{"style":155},[392],{"type":72,"value":393},"   user",{"type":61,"tag":136,"props":395,"children":396},{"style":149},[397],{"type":72,"value":105},{"type":61,"tag":136,"props":399,"children":400},{"style":155},[401],{"type":72,"value":402},"value",{"type":61,"tag":136,"props":404,"children":405},{"style":149},[406],{"type":72,"value":407}," =",{"type":61,"tag":136,"props":409,"children":410},{"style":143},[411],{"type":72,"value":264},{"type":61,"tag":136,"props":413,"children":414},{"style":210},[415],{"type":72,"value":416}," $fetch",{"type":61,"tag":136,"props":418,"children":419},{"style":271},[420],{"type":72,"value":218},{"type":61,"tag":136,"props":422,"children":423},{"style":149},[424],{"type":72,"value":425},"'",{"type":61,"tag":136,"props":427,"children":428},{"style":176},[429],{"type":72,"value":430},"/api/me",{"type":61,"tag":136,"props":432,"children":433},{"style":149},[434],{"type":72,"value":425},{"type":61,"tag":136,"props":436,"children":437},{"style":271},[438],{"type":72,"value":282},{"type":61,"tag":136,"props":440,"children":441},{"class":138,"line":285},[442],{"type":61,"tag":136,"props":443,"children":444},{"style":149},[445],{"type":72,"value":446},"}\n",{"type":61,"tag":68,"props":448,"children":449},{},[450,452,459],{"type":72,"value":451},"Be careful, if you want to call this route on SSR, please read this ",{"type":61,"tag":75,"props":453,"children":456},{"href":454,"rel":455},"https://nuxt.com/docs/getting-started/data-fetching#isomorphic-fetch-and-fetch",[79],[457],{"type":72,"value":458},"section",{"type":72,"value":460},", you must send your browser cookies including your supabase token.",{"type":61,"tag":125,"props":462,"children":464},{"className":127,"code":463,"filename":304,"language":130,"meta":55,"style":55},"const user = ref(null)\n\nconst { data } = await useFetch('/api/me', {\n  headers: useRequestHeaders(['cookie'])\n})\n\nuser.value = data\n",[465],{"type":61,"tag":112,"props":466,"children":467},{"__ignoreMap":55},[468,499,506,564,605,616,624],{"type":61,"tag":136,"props":469,"children":470},{"class":138,"line":139},[471,475,479,483,487,491,495],{"type":61,"tag":136,"props":472,"children":473},{"style":221},[474],{"type":72,"value":316},{"type":61,"tag":136,"props":476,"children":477},{"style":155},[478],{"type":72,"value":321},{"type":61,"tag":136,"props":480,"children":481},{"style":149},[482],{"type":72,"value":326},{"type":61,"tag":136,"props":484,"children":485},{"style":210},[486],{"type":72,"value":331},{"type":61,"tag":136,"props":488,"children":489},{"style":155},[490],{"type":72,"value":218},{"type":61,"tag":136,"props":492,"children":493},{"style":149},[494],{"type":72,"value":340},{"type":61,"tag":136,"props":496,"children":497},{"style":155},[498],{"type":72,"value":282},{"type":61,"tag":136,"props":500,"children":501},{"class":138,"line":186},[502],{"type":61,"tag":136,"props":503,"children":504},{"emptyLinePlaceholder":190},[505],{"type":72,"value":193},{"type":61,"tag":136,"props":507,"children":508},{"class":138,"line":196},[509,513,517,522,526,530,534,539,543,547,551,555,560],{"type":61,"tag":136,"props":510,"children":511},{"style":221},[512],{"type":72,"value":316},{"type":61,"tag":136,"props":514,"children":515},{"style":149},[516],{"type":72,"value":152},{"type":61,"tag":136,"props":518,"children":519},{"style":155},[520],{"type":72,"value":521}," data ",{"type":61,"tag":136,"props":523,"children":524},{"style":149},[525],{"type":72,"value":291},{"type":61,"tag":136,"props":527,"children":528},{"style":149},[529],{"type":72,"value":407},{"type":61,"tag":136,"props":531,"children":532},{"style":143},[533],{"type":72,"value":264},{"type":61,"tag":136,"props":535,"children":536},{"style":210},[537],{"type":72,"value":538}," useFetch",{"type":61,"tag":136,"props":540,"children":541},{"style":155},[542],{"type":72,"value":218},{"type":61,"tag":136,"props":544,"children":545},{"style":149},[546],{"type":72,"value":425},{"type":61,"tag":136,"props":548,"children":549},{"style":176},[550],{"type":72,"value":430},{"type":61,"tag":136,"props":552,"children":553},{"style":149},[554],{"type":72,"value":425},{"type":61,"tag":136,"props":556,"children":557},{"style":149},[558],{"type":72,"value":559},",",{"type":61,"tag":136,"props":561,"children":562},{"style":149},[563],{"type":72,"value":250},{"type":61,"tag":136,"props":565,"children":566},{"class":138,"line":253},[567,572,577,582,587,591,596,600],{"type":61,"tag":136,"props":568,"children":569},{"style":271},[570],{"type":72,"value":571},"  headers",{"type":61,"tag":136,"props":573,"children":574},{"style":149},[575],{"type":72,"value":576},":",{"type":61,"tag":136,"props":578,"children":579},{"style":210},[580],{"type":72,"value":581}," useRequestHeaders",{"type":61,"tag":136,"props":583,"children":584},{"style":155},[585],{"type":72,"value":586},"([",{"type":61,"tag":136,"props":588,"children":589},{"style":149},[590],{"type":72,"value":425},{"type":61,"tag":136,"props":592,"children":593},{"style":176},[594],{"type":72,"value":595},"cookie",{"type":61,"tag":136,"props":597,"children":598},{"style":149},[599],{"type":72,"value":425},{"type":61,"tag":136,"props":601,"children":602},{"style":155},[603],{"type":72,"value":604},"])\n",{"type":61,"tag":136,"props":606,"children":607},{"class":138,"line":285},[608,612],{"type":61,"tag":136,"props":609,"children":610},{"style":149},[611],{"type":72,"value":291},{"type":61,"tag":136,"props":613,"children":614},{"style":155},[615],{"type":72,"value":282},{"type":61,"tag":136,"props":617,"children":619},{"class":138,"line":618},6,[620],{"type":61,"tag":136,"props":621,"children":622},{"emptyLinePlaceholder":190},[623],{"type":72,"value":193},{"type":61,"tag":136,"props":625,"children":627},{"class":138,"line":626},7,[628,633,637,642,646],{"type":61,"tag":136,"props":629,"children":630},{"style":155},[631],{"type":72,"value":632},"user",{"type":61,"tag":136,"props":634,"children":635},{"style":149},[636],{"type":72,"value":105},{"type":61,"tag":136,"props":638,"children":639},{"style":155},[640],{"type":72,"value":641},"value ",{"type":61,"tag":136,"props":643,"children":644},{"style":149},[645],{"type":72,"value":326},{"type":61,"tag":136,"props":647,"children":648},{"style":155},[649],{"type":72,"value":650}," data\n",{"type":61,"tag":652,"props":653,"children":654},"style",{},[655],{"type":72,"value":656},"html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html.light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html .light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}",{"title":55,"searchDepth":186,"depth":186,"links":658},[],"markdown","content:4.usage:services:3.serverSupabaseUser.md","content","4.usage/services/3.serverSupabaseUser.md","md",[665,668],{"_path":35,"title":666,"description":667},"serverServiceRole","Make requests with super admin rights to the Supabase API with the serverSupabaseServiceRole service",{"_path":42,"title":41,"description":669},"Demonstration of using Supabase with Nuxt.",1700256132014]