[{"data":1,"prerenderedAt":674},["Reactive",2],{"navigation":3,"/usage/services/serversupabaseuser":52,"/usage/services/serversupabaseuser-surround":669},[4,8,12,40,44,48],{"title":5,"_path":6,"icon":7},"Get Started","/get-started","heroicons:rocket-launch",{"title":9,"_path":10,"icon":11},"Authentication","/authentication","heroicons:lock-closed",{"title":13,"_path":14,"children":15,"icon":39},"Usage","/usage",[16,26],{"title":17,"_path":18,"children":19},"Vue composables","/usage/composables",[20,23],{"title":21,"_path":22},"useSupabaseClient","/usage/composables/usesupabaseclient",{"title":24,"_path":25},"useSupabaseUser","/usage/composables/usesupabaseuser",{"title":27,"_path":28,"children":29},"Server services","/usage/services",[30,33,36],{"title":31,"_path":32},"serverSupabaseClient","/usage/services/serversupabaseclient",{"title":34,"_path":35},"serverSupabaseServiceRole","/usage/services/serversupabaseservicerole",{"title":37,"_path":38},"serverSupabaseUser","/usage/services/serversupabaseuser","heroicons:book-open",{"title":41,"_path":42,"icon":43},"Demo","/demo","heroicons:computer-desktop-20-solid",{"title":45,"_path":46,"icon":47},"Changelog","/changelog","heroicons:bookmark",{"title":49,"_path":50,"icon":51},"Roadmap","/roadmap","heroicons:map",{"_path":38,"_dir":53,"_draft":54,"_partial":54,"_locale":55,"title":37,"description":56,"body":57,"_type":664,"_id":665,"_source":666,"_file":667,"_extension":668},"services",false,"","Get your Supabase user from serverside with the serverSupabaseUser service",{"type":58,"children":59,"toc":662},"root",[60,68,91,111,129,301,306,452,466,656],{"type":61,"tag":62,"props":63,"children":65},"element","h1",{"id":64},"serversupabaseuser",[66],{"type":67,"value":37},"text",{"type":61,"tag":69,"props":70,"children":73},"callout",{"color":71,"icon":72},"amber","i-heroicons-exclamation-triangle-20-solid",[74],{"type":61,"tag":75,"props":76,"children":77},"p",{},[78,80,89],{"type":67,"value":79},"This section assumes you're familiar with ",{"type":61,"tag":81,"props":82,"children":86},"a",{"href":83,"rel":84},"https://v3.nuxtjs.org/guide/concepts/server-engine",[85],"nofollow",[87],{"type":67,"value":88},"Nitro",{"type":67,"value":90},", the server engine powered by Nuxt.",{"type":61,"tag":75,"props":92,"children":93},{},[94,96,100,102,109],{"type":67,"value":95},"This function is similar to the ",{"type":61,"tag":81,"props":97,"children":98},{"href":25},[99],{"type":67,"value":24},{"type":67,"value":101}," composable but is used in ",{"type":61,"tag":81,"props":103,"children":106},{"href":104,"rel":105},"https://nuxt.com/docs/guide/directory-structure/server#server-routes",[85],[107],{"type":67,"value":108},"server routes",{"type":67,"value":110},".",{"type":61,"tag":75,"props":112,"children":113},{},[114,116,121,123,128],{"type":67,"value":115},"Define your server route and import the ",{"type":61,"tag":117,"props":118,"children":119},"code",{"className":55},[120],{"type":67,"value":37},{"type":67,"value":122}," from ",{"type":61,"tag":117,"props":124,"children":125},{"className":55},[126],{"type":67,"value":127},"#supabase/server",{"type":67,"value":110},{"type":61,"tag":130,"props":131,"children":136},"pre",{"className":132,"code":133,"filename":134,"language":135,"meta":55,"style":55},"language-ts shiki shiki-themes material-theme-lighter material-theme material-theme-palenight","import { serverSupabaseUser } from '#supabase/server'\n\nexport default defineEventHandler(async (event) => {\n  return await serverSupabaseUser(event)\n})\n","server/api/me.ts","ts",[137],{"type":61,"tag":117,"props":138,"children":139},{"__ignoreMap":55},[140,189,199,256,288],{"type":61,"tag":141,"props":142,"children":145},"span",{"class":143,"line":144},"line",1,[146,152,158,164,169,174,179,184],{"type":61,"tag":141,"props":147,"children":149},{"style":148},"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF;--shiki-light-font-style:italic;--shiki-default-font-style:italic;--shiki-dark-font-style:italic",[150],{"type":67,"value":151},"import",{"type":61,"tag":141,"props":153,"children":155},{"style":154},"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF",[156],{"type":67,"value":157}," {",{"type":61,"tag":141,"props":159,"children":161},{"style":160},"--shiki-light:#90A4AE;--shiki-default:#EEFFFF;--shiki-dark:#BABED8",[162],{"type":67,"value":163}," serverSupabaseUser",{"type":61,"tag":141,"props":165,"children":166},{"style":154},[167],{"type":67,"value":168}," }",{"type":61,"tag":141,"props":170,"children":171},{"style":148},[172],{"type":67,"value":173}," from",{"type":61,"tag":141,"props":175,"children":176},{"style":154},[177],{"type":67,"value":178}," '",{"type":61,"tag":141,"props":180,"children":182},{"style":181},"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D",[183],{"type":67,"value":127},{"type":61,"tag":141,"props":185,"children":186},{"style":154},[187],{"type":67,"value":188},"'\n",{"type":61,"tag":141,"props":190,"children":192},{"class":143,"line":191},2,[193],{"type":61,"tag":141,"props":194,"children":196},{"emptyLinePlaceholder":195},true,[197],{"type":67,"value":198},"\n",{"type":61,"tag":141,"props":200,"children":202},{"class":143,"line":201},3,[203,208,213,219,224,230,235,241,246,251],{"type":61,"tag":141,"props":204,"children":205},{"style":148},[206],{"type":67,"value":207},"export",{"type":61,"tag":141,"props":209,"children":210},{"style":148},[211],{"type":67,"value":212}," default",{"type":61,"tag":141,"props":214,"children":216},{"style":215},"--shiki-light:#6182B8;--shiki-default:#82AAFF;--shiki-dark:#82AAFF",[217],{"type":67,"value":218}," defineEventHandler",{"type":61,"tag":141,"props":220,"children":221},{"style":160},[222],{"type":67,"value":223},"(",{"type":61,"tag":141,"props":225,"children":227},{"style":226},"--shiki-light:#9C3EDA;--shiki-default:#C792EA;--shiki-dark:#C792EA",[228],{"type":67,"value":229},"async",{"type":61,"tag":141,"props":231,"children":232},{"style":154},[233],{"type":67,"value":234}," (",{"type":61,"tag":141,"props":236,"children":238},{"style":237},"--shiki-light:#90A4AE;--shiki-default:#EEFFFF;--shiki-dark:#BABED8;--shiki-light-font-style:italic;--shiki-default-font-style:italic;--shiki-dark-font-style:italic",[239],{"type":67,"value":240},"event",{"type":61,"tag":141,"props":242,"children":243},{"style":154},[244],{"type":67,"value":245},")",{"type":61,"tag":141,"props":247,"children":248},{"style":226},[249],{"type":67,"value":250}," =>",{"type":61,"tag":141,"props":252,"children":253},{"style":154},[254],{"type":67,"value":255}," {\n",{"type":61,"tag":141,"props":257,"children":259},{"class":143,"line":258},4,[260,265,270,274,279,283],{"type":61,"tag":141,"props":261,"children":262},{"style":148},[263],{"type":67,"value":264},"  return",{"type":61,"tag":141,"props":266,"children":267},{"style":148},[268],{"type":67,"value":269}," await",{"type":61,"tag":141,"props":271,"children":272},{"style":215},[273],{"type":67,"value":163},{"type":61,"tag":141,"props":275,"children":277},{"style":276},"--shiki-light:#E53935;--shiki-default:#F07178;--shiki-dark:#F07178",[278],{"type":67,"value":223},{"type":61,"tag":141,"props":280,"children":281},{"style":160},[282],{"type":67,"value":240},{"type":61,"tag":141,"props":284,"children":285},{"style":276},[286],{"type":67,"value":287},")\n",{"type":61,"tag":141,"props":289,"children":291},{"class":143,"line":290},5,[292,297],{"type":61,"tag":141,"props":293,"children":294},{"style":154},[295],{"type":67,"value":296},"}",{"type":61,"tag":141,"props":298,"children":299},{"style":160},[300],{"type":67,"value":287},{"type":61,"tag":75,"props":302,"children":303},{},[304],{"type":67,"value":305},"Then call your api route from any vue file:",{"type":61,"tag":130,"props":307,"children":310},{"className":132,"code":308,"filename":309,"language":135,"meta":55,"style":55},"const user = ref(null)\n\nconst fetchMe = async () => {\n   user.value = await $fetch('/api/me')\n}\n","pages/index.vue",[311],{"type":61,"tag":117,"props":312,"children":313},{"__ignoreMap":55},[314,350,357,391,444],{"type":61,"tag":141,"props":315,"children":316},{"class":143,"line":144},[317,322,327,332,337,341,346],{"type":61,"tag":141,"props":318,"children":319},{"style":226},[320],{"type":67,"value":321},"const",{"type":61,"tag":141,"props":323,"children":324},{"style":160},[325],{"type":67,"value":326}," user ",{"type":61,"tag":141,"props":328,"children":329},{"style":154},[330],{"type":67,"value":331},"=",{"type":61,"tag":141,"props":333,"children":334},{"style":215},[335],{"type":67,"value":336}," ref",{"type":61,"tag":141,"props":338,"children":339},{"style":160},[340],{"type":67,"value":223},{"type":61,"tag":141,"props":342,"children":343},{"style":154},[344],{"type":67,"value":345},"null",{"type":61,"tag":141,"props":347,"children":348},{"style":160},[349],{"type":67,"value":287},{"type":61,"tag":141,"props":351,"children":352},{"class":143,"line":191},[353],{"type":61,"tag":141,"props":354,"children":355},{"emptyLinePlaceholder":195},[356],{"type":67,"value":198},{"type":61,"tag":141,"props":358,"children":359},{"class":143,"line":201},[360,364,369,373,378,383,387],{"type":61,"tag":141,"props":361,"children":362},{"style":226},[363],{"type":67,"value":321},{"type":61,"tag":141,"props":365,"children":366},{"style":160},[367],{"type":67,"value":368}," fetchMe ",{"type":61,"tag":141,"props":370,"children":371},{"style":154},[372],{"type":67,"value":331},{"type":61,"tag":141,"props":374,"children":375},{"style":226},[376],{"type":67,"value":377}," async",{"type":61,"tag":141,"props":379,"children":380},{"style":154},[381],{"type":67,"value":382}," ()",{"type":61,"tag":141,"props":384,"children":385},{"style":226},[386],{"type":67,"value":250},{"type":61,"tag":141,"props":388,"children":389},{"style":154},[390],{"type":67,"value":255},{"type":61,"tag":141,"props":392,"children":393},{"class":143,"line":258},[394,399,403,408,413,417,422,426,431,436,440],{"type":61,"tag":141,"props":395,"children":396},{"style":160},[397],{"type":67,"value":398},"   user",{"type":61,"tag":141,"props":400,"children":401},{"style":154},[402],{"type":67,"value":110},{"type":61,"tag":141,"props":404,"children":405},{"style":160},[406],{"type":67,"value":407},"value",{"type":61,"tag":141,"props":409,"children":410},{"style":154},[411],{"type":67,"value":412}," =",{"type":61,"tag":141,"props":414,"children":415},{"style":148},[416],{"type":67,"value":269},{"type":61,"tag":141,"props":418,"children":419},{"style":215},[420],{"type":67,"value":421}," $fetch",{"type":61,"tag":141,"props":423,"children":424},{"style":276},[425],{"type":67,"value":223},{"type":61,"tag":141,"props":427,"children":428},{"style":154},[429],{"type":67,"value":430},"'",{"type":61,"tag":141,"props":432,"children":433},{"style":181},[434],{"type":67,"value":435},"/api/me",{"type":61,"tag":141,"props":437,"children":438},{"style":154},[439],{"type":67,"value":430},{"type":61,"tag":141,"props":441,"children":442},{"style":276},[443],{"type":67,"value":287},{"type":61,"tag":141,"props":445,"children":446},{"class":143,"line":290},[447],{"type":61,"tag":141,"props":448,"children":449},{"style":154},[450],{"type":67,"value":451},"}\n",{"type":61,"tag":75,"props":453,"children":454},{},[455,457,464],{"type":67,"value":456},"Be careful, if you want to call this route on SSR, please read this ",{"type":61,"tag":81,"props":458,"children":461},{"href":459,"rel":460},"https://nuxt.com/docs/getting-started/data-fetching#isomorphic-fetch-and-fetch",[85],[462],{"type":67,"value":463},"section",{"type":67,"value":465},", you must send your browser cookies including your supabase token.",{"type":61,"tag":130,"props":467,"children":469},{"className":132,"code":468,"filename":309,"language":135,"meta":55,"style":55},"const user = ref(null)\n\nconst { data } = await useFetch('/api/me', {\n  headers: useRequestHeaders(['cookie'])\n})\n\nuser.value = data\n",[470],{"type":61,"tag":117,"props":471,"children":472},{"__ignoreMap":55},[473,504,511,569,610,621,629],{"type":61,"tag":141,"props":474,"children":475},{"class":143,"line":144},[476,480,484,488,492,496,500],{"type":61,"tag":141,"props":477,"children":478},{"style":226},[479],{"type":67,"value":321},{"type":61,"tag":141,"props":481,"children":482},{"style":160},[483],{"type":67,"value":326},{"type":61,"tag":141,"props":485,"children":486},{"style":154},[487],{"type":67,"value":331},{"type":61,"tag":141,"props":489,"children":490},{"style":215},[491],{"type":67,"value":336},{"type":61,"tag":141,"props":493,"children":494},{"style":160},[495],{"type":67,"value":223},{"type":61,"tag":141,"props":497,"children":498},{"style":154},[499],{"type":67,"value":345},{"type":61,"tag":141,"props":501,"children":502},{"style":160},[503],{"type":67,"value":287},{"type":61,"tag":141,"props":505,"children":506},{"class":143,"line":191},[507],{"type":61,"tag":141,"props":508,"children":509},{"emptyLinePlaceholder":195},[510],{"type":67,"value":198},{"type":61,"tag":141,"props":512,"children":513},{"class":143,"line":201},[514,518,522,527,531,535,539,544,548,552,556,560,565],{"type":61,"tag":141,"props":515,"children":516},{"style":226},[517],{"type":67,"value":321},{"type":61,"tag":141,"props":519,"children":520},{"style":154},[521],{"type":67,"value":157},{"type":61,"tag":141,"props":523,"children":524},{"style":160},[525],{"type":67,"value":526}," data ",{"type":61,"tag":141,"props":528,"children":529},{"style":154},[530],{"type":67,"value":296},{"type":61,"tag":141,"props":532,"children":533},{"style":154},[534],{"type":67,"value":412},{"type":61,"tag":141,"props":536,"children":537},{"style":148},[538],{"type":67,"value":269},{"type":61,"tag":141,"props":540,"children":541},{"style":215},[542],{"type":67,"value":543}," useFetch",{"type":61,"tag":141,"props":545,"children":546},{"style":160},[547],{"type":67,"value":223},{"type":61,"tag":141,"props":549,"children":550},{"style":154},[551],{"type":67,"value":430},{"type":61,"tag":141,"props":553,"children":554},{"style":181},[555],{"type":67,"value":435},{"type":61,"tag":141,"props":557,"children":558},{"style":154},[559],{"type":67,"value":430},{"type":61,"tag":141,"props":561,"children":562},{"style":154},[563],{"type":67,"value":564},",",{"type":61,"tag":141,"props":566,"children":567},{"style":154},[568],{"type":67,"value":255},{"type":61,"tag":141,"props":570,"children":571},{"class":143,"line":258},[572,577,582,587,592,596,601,605],{"type":61,"tag":141,"props":573,"children":574},{"style":276},[575],{"type":67,"value":576},"  headers",{"type":61,"tag":141,"props":578,"children":579},{"style":154},[580],{"type":67,"value":581},":",{"type":61,"tag":141,"props":583,"children":584},{"style":215},[585],{"type":67,"value":586}," useRequestHeaders",{"type":61,"tag":141,"props":588,"children":589},{"style":160},[590],{"type":67,"value":591},"([",{"type":61,"tag":141,"props":593,"children":594},{"style":154},[595],{"type":67,"value":430},{"type":61,"tag":141,"props":597,"children":598},{"style":181},[599],{"type":67,"value":600},"cookie",{"type":61,"tag":141,"props":602,"children":603},{"style":154},[604],{"type":67,"value":430},{"type":61,"tag":141,"props":606,"children":607},{"style":160},[608],{"type":67,"value":609},"])\n",{"type":61,"tag":141,"props":611,"children":612},{"class":143,"line":290},[613,617],{"type":61,"tag":141,"props":614,"children":615},{"style":154},[616],{"type":67,"value":296},{"type":61,"tag":141,"props":618,"children":619},{"style":160},[620],{"type":67,"value":287},{"type":61,"tag":141,"props":622,"children":624},{"class":143,"line":623},6,[625],{"type":61,"tag":141,"props":626,"children":627},{"emptyLinePlaceholder":195},[628],{"type":67,"value":198},{"type":61,"tag":141,"props":630,"children":632},{"class":143,"line":631},7,[633,638,642,647,651],{"type":61,"tag":141,"props":634,"children":635},{"style":160},[636],{"type":67,"value":637},"user",{"type":61,"tag":141,"props":639,"children":640},{"style":154},[641],{"type":67,"value":110},{"type":61,"tag":141,"props":643,"children":644},{"style":160},[645],{"type":67,"value":646},"value ",{"type":61,"tag":141,"props":648,"children":649},{"style":154},[650],{"type":67,"value":331},{"type":61,"tag":141,"props":652,"children":653},{"style":160},[654],{"type":67,"value":655}," data\n",{"type":61,"tag":657,"props":658,"children":659},"style",{},[660],{"type":67,"value":661},"html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html.light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html .light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}",{"title":55,"searchDepth":191,"depth":191,"links":663},[],"markdown","content:4.usage:services:3.serverSupabaseUser.md","content","4.usage/services/3.serverSupabaseUser.md","md",[670,672],{"_path":35,"title":34,"description":671},"Make requests with super admin rights to the Supabase API with the serverSupabaseServiceRole service",{"_path":42,"title":41,"description":673},"Demonstration of using Supabase with Nuxt.",1700241193291]