[{"data":1,"prerenderedAt":731},["Reactive",2],{"navigation":3,"/usage/services/serversupabaseclient":52,"/usage/services/serversupabaseclient-surround":726},[4,8,12,40,44,48],{"title":5,"_path":6,"icon":7},"Get Started","/get-started","heroicons:rocket-launch",{"title":9,"_path":10,"icon":11},"Authentication","/authentication","heroicons:lock-closed",{"title":13,"_path":14,"children":15,"icon":39},"Usage","/usage",[16,26],{"title":17,"_path":18,"children":19},"Vue composables","/usage/composables",[20,23],{"title":21,"_path":22},"useSupabaseClient","/usage/composables/usesupabaseclient",{"title":24,"_path":25},"useSupabaseUser","/usage/composables/usesupabaseuser",{"title":27,"_path":28,"children":29},"Server services","/usage/services",[30,33,36],{"title":31,"_path":32},"serverSupabaseClient","/usage/services/serversupabaseclient",{"title":34,"_path":35},"serverSupabaseServiceRole","/usage/services/serversupabaseservicerole",{"title":37,"_path":38},"serverSupabaseUser","/usage/services/serversupabaseuser","heroicons:book-open",{"title":41,"_path":42,"icon":43},"Demo","/demo","heroicons:computer-desktop-20-solid",{"title":45,"_path":46,"icon":47},"Changelog","/changelog","heroicons:bookmark",{"title":49,"_path":50,"icon":51},"Roadmap","/roadmap","heroicons:map",{"_path":32,"_dir":53,"_draft":54,"_partial":54,"_locale":55,"title":31,"description":56,"body":57,"_type":721,"_id":722,"_source":723,"_file":724,"_extension":725},"services",false,"","Make requests to the Supabase API on server side with the serverSupabaseClient service",{"type":58,"children":59,"toc":719},"root",[60,68,91,111,136,460,465,570,584,713],{"type":61,"tag":62,"props":63,"children":65},"element","h1",{"id":64},"serversupabaseclient",[66],{"type":67,"value":31},"text",{"type":61,"tag":69,"props":70,"children":73},"callout",{"color":71,"icon":72},"amber","i-heroicons-exclamation-triangle-20-solid",[74],{"type":61,"tag":75,"props":76,"children":77},"p",{},[78,80,89],{"type":67,"value":79},"This section assumes you're familiar with ",{"type":61,"tag":81,"props":82,"children":86},"a",{"href":83,"rel":84},"https://v3.nuxtjs.org/guide/concepts/server-engine",[85],"nofollow",[87],{"type":67,"value":88},"Nitro",{"type":67,"value":90},", the server engine powered by Nuxt.",{"type":61,"tag":75,"props":92,"children":93},{},[94,96,100,102,109],{"type":67,"value":95},"This function is working similary as the ",{"type":61,"tag":81,"props":97,"children":98},{"href":22},[99],{"type":67,"value":21},{"type":67,"value":101}," composable but is designed to be used in ",{"type":61,"tag":81,"props":103,"children":106},{"href":104,"rel":105},"https://nuxt.com/docs/guide/directory-structure/server#server-routes",[85],[107],{"type":67,"value":108},"server routes",{"type":67,"value":110},".",{"type":61,"tag":75,"props":112,"children":113},{},[114,116,121,123,128,130,134],{"type":67,"value":115},"Define your server route and just import the ",{"type":61,"tag":117,"props":118,"children":119},"code",{"className":55},[120],{"type":67,"value":31},{"type":67,"value":122}," from ",{"type":61,"tag":117,"props":124,"children":125},{"className":55},[126],{"type":67,"value":127},"#supabase/server",{"type":67,"value":129},". Be careful,  ",{"type":61,"tag":117,"props":131,"children":132},{"className":55},[133],{"type":67,"value":31},{"type":67,"value":135}," is returning a promise.",{"type":61,"tag":137,"props":138,"children":143},"pre",{"className":139,"code":140,"filename":141,"language":142,"meta":55,"style":55},"language-ts shiki shiki-themes material-theme-lighter material-theme material-theme-palenight","import { serverSupabaseClient } from '#supabase/server'\n\nexport default eventHandler(async (event) => {\n  const client = await serverSupabaseClient(event)\n\n  const { data } = await client.from('libraries').select('*')\n\n  return { libraries: data }\n})\n","server/api/libraries.ts","ts",[144],{"type":61,"tag":117,"props":145,"children":146},{"__ignoreMap":55},[147,196,206,263,305,313,407,415,447],{"type":61,"tag":148,"props":149,"children":152},"span",{"class":150,"line":151},"line",1,[153,159,165,171,176,181,186,191],{"type":61,"tag":148,"props":154,"children":156},{"style":155},"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF;--shiki-light-font-style:italic;--shiki-default-font-style:italic;--shiki-dark-font-style:italic",[157],{"type":67,"value":158},"import",{"type":61,"tag":148,"props":160,"children":162},{"style":161},"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF",[163],{"type":67,"value":164}," {",{"type":61,"tag":148,"props":166,"children":168},{"style":167},"--shiki-light:#90A4AE;--shiki-default:#EEFFFF;--shiki-dark:#BABED8",[169],{"type":67,"value":170}," serverSupabaseClient",{"type":61,"tag":148,"props":172,"children":173},{"style":161},[174],{"type":67,"value":175}," }",{"type":61,"tag":148,"props":177,"children":178},{"style":155},[179],{"type":67,"value":180}," from",{"type":61,"tag":148,"props":182,"children":183},{"style":161},[184],{"type":67,"value":185}," '",{"type":61,"tag":148,"props":187,"children":189},{"style":188},"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D",[190],{"type":67,"value":127},{"type":61,"tag":148,"props":192,"children":193},{"style":161},[194],{"type":67,"value":195},"'\n",{"type":61,"tag":148,"props":197,"children":199},{"class":150,"line":198},2,[200],{"type":61,"tag":148,"props":201,"children":203},{"emptyLinePlaceholder":202},true,[204],{"type":67,"value":205},"\n",{"type":61,"tag":148,"props":207,"children":209},{"class":150,"line":208},3,[210,215,220,226,231,237,242,248,253,258],{"type":61,"tag":148,"props":211,"children":212},{"style":155},[213],{"type":67,"value":214},"export",{"type":61,"tag":148,"props":216,"children":217},{"style":155},[218],{"type":67,"value":219}," default",{"type":61,"tag":148,"props":221,"children":223},{"style":222},"--shiki-light:#6182B8;--shiki-default:#82AAFF;--shiki-dark:#82AAFF",[224],{"type":67,"value":225}," eventHandler",{"type":61,"tag":148,"props":227,"children":228},{"style":167},[229],{"type":67,"value":230},"(",{"type":61,"tag":148,"props":232,"children":234},{"style":233},"--shiki-light:#9C3EDA;--shiki-default:#C792EA;--shiki-dark:#C792EA",[235],{"type":67,"value":236},"async",{"type":61,"tag":148,"props":238,"children":239},{"style":161},[240],{"type":67,"value":241}," (",{"type":61,"tag":148,"props":243,"children":245},{"style":244},"--shiki-light:#90A4AE;--shiki-default:#EEFFFF;--shiki-dark:#BABED8;--shiki-light-font-style:italic;--shiki-default-font-style:italic;--shiki-dark-font-style:italic",[246],{"type":67,"value":247},"event",{"type":61,"tag":148,"props":249,"children":250},{"style":161},[251],{"type":67,"value":252},")",{"type":61,"tag":148,"props":254,"children":255},{"style":233},[256],{"type":67,"value":257}," =>",{"type":61,"tag":148,"props":259,"children":260},{"style":161},[261],{"type":67,"value":262}," {\n",{"type":61,"tag":148,"props":264,"children":266},{"class":150,"line":265},4,[267,272,277,282,287,291,296,300],{"type":61,"tag":148,"props":268,"children":269},{"style":233},[270],{"type":67,"value":271},"  const",{"type":61,"tag":148,"props":273,"children":274},{"style":167},[275],{"type":67,"value":276}," client",{"type":61,"tag":148,"props":278,"children":279},{"style":161},[280],{"type":67,"value":281}," =",{"type":61,"tag":148,"props":283,"children":284},{"style":155},[285],{"type":67,"value":286}," await",{"type":61,"tag":148,"props":288,"children":289},{"style":222},[290],{"type":67,"value":170},{"type":61,"tag":148,"props":292,"children":294},{"style":293},"--shiki-light:#E53935;--shiki-default:#F07178;--shiki-dark:#F07178",[295],{"type":67,"value":230},{"type":61,"tag":148,"props":297,"children":298},{"style":167},[299],{"type":67,"value":247},{"type":61,"tag":148,"props":301,"children":302},{"style":293},[303],{"type":67,"value":304},")\n",{"type":61,"tag":148,"props":306,"children":308},{"class":150,"line":307},5,[309],{"type":61,"tag":148,"props":310,"children":311},{"emptyLinePlaceholder":202},[312],{"type":67,"value":205},{"type":61,"tag":148,"props":314,"children":316},{"class":150,"line":315},6,[317,321,325,330,334,338,342,346,350,355,359,364,369,373,377,381,386,390,394,399,403],{"type":61,"tag":148,"props":318,"children":319},{"style":233},[320],{"type":67,"value":271},{"type":61,"tag":148,"props":322,"children":323},{"style":161},[324],{"type":67,"value":164},{"type":61,"tag":148,"props":326,"children":327},{"style":167},[328],{"type":67,"value":329}," data",{"type":61,"tag":148,"props":331,"children":332},{"style":161},[333],{"type":67,"value":175},{"type":61,"tag":148,"props":335,"children":336},{"style":161},[337],{"type":67,"value":281},{"type":61,"tag":148,"props":339,"children":340},{"style":155},[341],{"type":67,"value":286},{"type":61,"tag":148,"props":343,"children":344},{"style":167},[345],{"type":67,"value":276},{"type":61,"tag":148,"props":347,"children":348},{"style":161},[349],{"type":67,"value":110},{"type":61,"tag":148,"props":351,"children":352},{"style":222},[353],{"type":67,"value":354},"from",{"type":61,"tag":148,"props":356,"children":357},{"style":293},[358],{"type":67,"value":230},{"type":61,"tag":148,"props":360,"children":361},{"style":161},[362],{"type":67,"value":363},"'",{"type":61,"tag":148,"props":365,"children":366},{"style":188},[367],{"type":67,"value":368},"libraries",{"type":61,"tag":148,"props":370,"children":371},{"style":161},[372],{"type":67,"value":363},{"type":61,"tag":148,"props":374,"children":375},{"style":293},[376],{"type":67,"value":252},{"type":61,"tag":148,"props":378,"children":379},{"style":161},[380],{"type":67,"value":110},{"type":61,"tag":148,"props":382,"children":383},{"style":222},[384],{"type":67,"value":385},"select",{"type":61,"tag":148,"props":387,"children":388},{"style":293},[389],{"type":67,"value":230},{"type":61,"tag":148,"props":391,"children":392},{"style":161},[393],{"type":67,"value":363},{"type":61,"tag":148,"props":395,"children":396},{"style":188},[397],{"type":67,"value":398},"*",{"type":61,"tag":148,"props":400,"children":401},{"style":161},[402],{"type":67,"value":363},{"type":61,"tag":148,"props":404,"children":405},{"style":293},[406],{"type":67,"value":304},{"type":61,"tag":148,"props":408,"children":410},{"class":150,"line":409},7,[411],{"type":61,"tag":148,"props":412,"children":413},{"emptyLinePlaceholder":202},[414],{"type":67,"value":205},{"type":61,"tag":148,"props":416,"children":418},{"class":150,"line":417},8,[419,424,428,433,438,442],{"type":61,"tag":148,"props":420,"children":421},{"style":155},[422],{"type":67,"value":423},"  return",{"type":61,"tag":148,"props":425,"children":426},{"style":161},[427],{"type":67,"value":164},{"type":61,"tag":148,"props":429,"children":430},{"style":293},[431],{"type":67,"value":432}," libraries",{"type":61,"tag":148,"props":434,"children":435},{"style":161},[436],{"type":67,"value":437},":",{"type":61,"tag":148,"props":439,"children":440},{"style":167},[441],{"type":67,"value":329},{"type":61,"tag":148,"props":443,"children":444},{"style":161},[445],{"type":67,"value":446}," }\n",{"type":61,"tag":148,"props":448,"children":450},{"class":150,"line":449},9,[451,456],{"type":61,"tag":148,"props":452,"children":453},{"style":161},[454],{"type":67,"value":455},"}",{"type":61,"tag":148,"props":457,"children":458},{"style":167},[459],{"type":67,"value":304},{"type":61,"tag":75,"props":461,"children":462},{},[463],{"type":67,"value":464},"Then call your API route from any vue file:",{"type":61,"tag":137,"props":466,"children":469},{"className":139,"code":467,"filename":468,"language":142,"meta":55,"style":55},"const fetchLibrary = async () => {\n  const { libraries } = await $fetch('/api/libraries')\n}\n","pages/index.vue",[470],{"type":61,"tag":117,"props":471,"children":472},{"__ignoreMap":55},[473,509,562],{"type":61,"tag":148,"props":474,"children":475},{"class":150,"line":151},[476,481,486,491,496,501,505],{"type":61,"tag":148,"props":477,"children":478},{"style":233},[479],{"type":67,"value":480},"const",{"type":61,"tag":148,"props":482,"children":483},{"style":167},[484],{"type":67,"value":485}," fetchLibrary ",{"type":61,"tag":148,"props":487,"children":488},{"style":161},[489],{"type":67,"value":490},"=",{"type":61,"tag":148,"props":492,"children":493},{"style":233},[494],{"type":67,"value":495}," async",{"type":61,"tag":148,"props":497,"children":498},{"style":161},[499],{"type":67,"value":500}," ()",{"type":61,"tag":148,"props":502,"children":503},{"style":233},[504],{"type":67,"value":257},{"type":61,"tag":148,"props":506,"children":507},{"style":161},[508],{"type":67,"value":262},{"type":61,"tag":148,"props":510,"children":511},{"class":150,"line":198},[512,516,520,524,528,532,536,541,545,549,554,558],{"type":61,"tag":148,"props":513,"children":514},{"style":233},[515],{"type":67,"value":271},{"type":61,"tag":148,"props":517,"children":518},{"style":161},[519],{"type":67,"value":164},{"type":61,"tag":148,"props":521,"children":522},{"style":167},[523],{"type":67,"value":432},{"type":61,"tag":148,"props":525,"children":526},{"style":161},[527],{"type":67,"value":175},{"type":61,"tag":148,"props":529,"children":530},{"style":161},[531],{"type":67,"value":281},{"type":61,"tag":148,"props":533,"children":534},{"style":155},[535],{"type":67,"value":286},{"type":61,"tag":148,"props":537,"children":538},{"style":222},[539],{"type":67,"value":540}," $fetch",{"type":61,"tag":148,"props":542,"children":543},{"style":293},[544],{"type":67,"value":230},{"type":61,"tag":148,"props":546,"children":547},{"style":161},[548],{"type":67,"value":363},{"type":61,"tag":148,"props":550,"children":551},{"style":188},[552],{"type":67,"value":553},"/api/libraries",{"type":61,"tag":148,"props":555,"children":556},{"style":161},[557],{"type":67,"value":363},{"type":61,"tag":148,"props":559,"children":560},{"style":293},[561],{"type":67,"value":304},{"type":61,"tag":148,"props":563,"children":564},{"class":150,"line":208},[565],{"type":61,"tag":148,"props":566,"children":567},{"style":161},[568],{"type":67,"value":569},"}\n",{"type":61,"tag":75,"props":571,"children":572},{},[573,575,582],{"type":67,"value":574},"Be careful, if you want to call this route on SSR, please read this ",{"type":61,"tag":81,"props":576,"children":579},{"href":577,"rel":578},"https://nuxt.com/docs/getting-started/data-fetching#isomorphic-fetch-and-fetch",[85],[580],{"type":67,"value":581},"section",{"type":67,"value":583},", you must send your browser cookies including your supabase token.",{"type":61,"tag":137,"props":585,"children":587},{"className":139,"code":586,"filename":468,"language":142,"meta":55,"style":55},"const { data: { libraries }} = await useFetch('/api/libraries', {\n  headers: useRequestHeaders(['cookie'])\n})\n",[588],{"type":61,"tag":117,"props":589,"children":590},{"__ignoreMap":55},[591,662,702],{"type":61,"tag":148,"props":592,"children":593},{"class":150,"line":151},[594,598,602,606,610,614,619,624,628,632,637,641,645,649,653,658],{"type":61,"tag":148,"props":595,"children":596},{"style":233},[597],{"type":67,"value":480},{"type":61,"tag":148,"props":599,"children":600},{"style":161},[601],{"type":67,"value":164},{"type":61,"tag":148,"props":603,"children":604},{"style":293},[605],{"type":67,"value":329},{"type":61,"tag":148,"props":607,"children":608},{"style":161},[609],{"type":67,"value":437},{"type":61,"tag":148,"props":611,"children":612},{"style":161},[613],{"type":67,"value":164},{"type":61,"tag":148,"props":615,"children":616},{"style":167},[617],{"type":67,"value":618}," libraries ",{"type":61,"tag":148,"props":620,"children":621},{"style":161},[622],{"type":67,"value":623},"}}",{"type":61,"tag":148,"props":625,"children":626},{"style":161},[627],{"type":67,"value":281},{"type":61,"tag":148,"props":629,"children":630},{"style":155},[631],{"type":67,"value":286},{"type":61,"tag":148,"props":633,"children":634},{"style":222},[635],{"type":67,"value":636}," useFetch",{"type":61,"tag":148,"props":638,"children":639},{"style":167},[640],{"type":67,"value":230},{"type":61,"tag":148,"props":642,"children":643},{"style":161},[644],{"type":67,"value":363},{"type":61,"tag":148,"props":646,"children":647},{"style":188},[648],{"type":67,"value":553},{"type":61,"tag":148,"props":650,"children":651},{"style":161},[652],{"type":67,"value":363},{"type":61,"tag":148,"props":654,"children":655},{"style":161},[656],{"type":67,"value":657},",",{"type":61,"tag":148,"props":659,"children":660},{"style":161},[661],{"type":67,"value":262},{"type":61,"tag":148,"props":663,"children":664},{"class":150,"line":198},[665,670,674,679,684,688,693,697],{"type":61,"tag":148,"props":666,"children":667},{"style":293},[668],{"type":67,"value":669},"  headers",{"type":61,"tag":148,"props":671,"children":672},{"style":161},[673],{"type":67,"value":437},{"type":61,"tag":148,"props":675,"children":676},{"style":222},[677],{"type":67,"value":678}," useRequestHeaders",{"type":61,"tag":148,"props":680,"children":681},{"style":167},[682],{"type":67,"value":683},"([",{"type":61,"tag":148,"props":685,"children":686},{"style":161},[687],{"type":67,"value":363},{"type":61,"tag":148,"props":689,"children":690},{"style":188},[691],{"type":67,"value":692},"cookie",{"type":61,"tag":148,"props":694,"children":695},{"style":161},[696],{"type":67,"value":363},{"type":61,"tag":148,"props":698,"children":699},{"style":167},[700],{"type":67,"value":701},"])\n",{"type":61,"tag":148,"props":703,"children":704},{"class":150,"line":208},[705,709],{"type":61,"tag":148,"props":706,"children":707},{"style":161},[708],{"type":67,"value":455},{"type":61,"tag":148,"props":710,"children":711},{"style":167},[712],{"type":67,"value":304},{"type":61,"tag":714,"props":715,"children":716},"style",{},[717],{"type":67,"value":718},"html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html.light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html .light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}",{"title":55,"searchDepth":198,"depth":198,"links":720},[],"markdown","content:4.usage:services:1.serverSupabaseClient.md","content","4.usage/services/1.serverSupabaseClient.md","md",[727,729],{"_path":25,"title":24,"description":728},"Auto import and use your Supabase user with the useSupabaseUser composable",{"_path":35,"title":34,"description":730},"Make requests with super admin rights to the Supabase API with the serverSupabaseServiceRole service",1700241192844]