[{"data":1,"prerenderedAt":729},["Reactive",2],{"navigation":3,"/usage/services/serversupabaseclient":52,"/usage/services/serversupabaseclient-surround":723},[4,8,12,40,44,48],{"title":5,"_path":6,"icon":7},"Get Started","/get-started","heroicons:rocket-launch",{"title":9,"_path":10,"icon":11},"Authentication","/authentication","heroicons:lock-closed",{"title":13,"_path":14,"children":15,"icon":39},"Usage","/usage",[16,26],{"title":17,"_path":18,"children":19},"Vue composables","/usage/composables",[20,23],{"title":21,"_path":22},"useSupabaseClient","/usage/composables/usesupabaseclient",{"title":24,"_path":25},"useSupabaseUser","/usage/composables/usesupabaseuser",{"title":27,"_path":28,"children":29},"Server services","/usage/services",[30,33,36],{"title":31,"_path":32},"serverSupabaseClient","/usage/services/serversupabaseclient",{"title":34,"_path":35},"serverSupabaseServiceRole","/usage/services/serversupabaseservicerole",{"title":37,"_path":38},"serverSupabaseUser","/usage/services/serversupabaseuser","heroicons:book-open",{"title":41,"_path":42,"icon":43},"Demo","/demo","heroicons:computer-desktop-20-solid",{"title":45,"_path":46,"icon":47},"Changelog","/changelog","heroicons:bookmark",{"title":49,"_path":50,"icon":51},"Roadmap","/roadmap","heroicons:map",{"_path":32,"_dir":53,"_draft":54,"_partial":54,"_locale":55,"title":31,"description":56,"body":57,"_type":718,"_id":719,"_source":720,"_file":721,"_extension":722},"services",false,"","Make requests to the Supabase API on server side with the serverSupabaseClient service",{"type":58,"children":59,"toc":716},"root",[60,85,105,133,457,462,567,581,710],{"type":61,"tag":62,"props":63,"children":66},"element","callout",{"color":64,"icon":65},"amber","i-heroicons-exclamation-triangle-20-solid",[67],{"type":61,"tag":68,"props":69,"children":70},"p",{},[71,74,83],{"type":72,"value":73},"text","This section assumes you're familiar with ",{"type":61,"tag":75,"props":76,"children":80},"a",{"href":77,"rel":78},"https://v3.nuxtjs.org/guide/concepts/server-engine",[79],"nofollow",[81],{"type":72,"value":82},"Nitro",{"type":72,"value":84},", the server engine powered by Nuxt.",{"type":61,"tag":68,"props":86,"children":87},{},[88,90,94,96,103],{"type":72,"value":89},"This function is working similary as the ",{"type":61,"tag":75,"props":91,"children":92},{"href":22},[93],{"type":72,"value":21},{"type":72,"value":95}," composable but is designed to be used in ",{"type":61,"tag":75,"props":97,"children":100},{"href":98,"rel":99},"https://nuxt.com/docs/guide/directory-structure/server#server-routes",[79],[101],{"type":72,"value":102},"server routes",{"type":72,"value":104},".",{"type":61,"tag":68,"props":106,"children":107},{},[108,110,116,118,124,126,131],{"type":72,"value":109},"Define your server route and just import the ",{"type":61,"tag":111,"props":112,"children":114},"code",{"className":113},[],[115],{"type":72,"value":31},{"type":72,"value":117}," from ",{"type":61,"tag":111,"props":119,"children":121},{"className":120},[],[122],{"type":72,"value":123},"#supabase/server",{"type":72,"value":125},". Be careful,  ",{"type":61,"tag":111,"props":127,"children":129},{"className":128},[],[130],{"type":72,"value":31},{"type":72,"value":132}," is returning a promise.",{"type":61,"tag":134,"props":135,"children":140},"pre",{"className":136,"code":137,"filename":138,"language":139,"meta":55,"style":55},"language-ts shiki shiki-themes material-theme-lighter material-theme material-theme-palenight","import { serverSupabaseClient } from '#supabase/server'\n\nexport default eventHandler(async (event) => {\n  const client = await serverSupabaseClient(event)\n\n  const { data } = await client.from('libraries').select('*')\n\n  return { libraries: data }\n})\n","server/api/libraries.ts","ts",[141],{"type":61,"tag":111,"props":142,"children":143},{"__ignoreMap":55},[144,193,203,260,302,310,404,412,444],{"type":61,"tag":145,"props":146,"children":149},"span",{"class":147,"line":148},"line",1,[150,156,162,168,173,178,183,188],{"type":61,"tag":145,"props":151,"children":153},{"style":152},"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF;--shiki-light-font-style:italic;--shiki-default-font-style:italic;--shiki-dark-font-style:italic",[154],{"type":72,"value":155},"import",{"type":61,"tag":145,"props":157,"children":159},{"style":158},"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF",[160],{"type":72,"value":161}," {",{"type":61,"tag":145,"props":163,"children":165},{"style":164},"--shiki-light:#90A4AE;--shiki-default:#EEFFFF;--shiki-dark:#BABED8",[166],{"type":72,"value":167}," serverSupabaseClient",{"type":61,"tag":145,"props":169,"children":170},{"style":158},[171],{"type":72,"value":172}," }",{"type":61,"tag":145,"props":174,"children":175},{"style":152},[176],{"type":72,"value":177}," from",{"type":61,"tag":145,"props":179,"children":180},{"style":158},[181],{"type":72,"value":182}," '",{"type":61,"tag":145,"props":184,"children":186},{"style":185},"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D",[187],{"type":72,"value":123},{"type":61,"tag":145,"props":189,"children":190},{"style":158},[191],{"type":72,"value":192},"'\n",{"type":61,"tag":145,"props":194,"children":196},{"class":147,"line":195},2,[197],{"type":61,"tag":145,"props":198,"children":200},{"emptyLinePlaceholder":199},true,[201],{"type":72,"value":202},"\n",{"type":61,"tag":145,"props":204,"children":206},{"class":147,"line":205},3,[207,212,217,223,228,234,239,245,250,255],{"type":61,"tag":145,"props":208,"children":209},{"style":152},[210],{"type":72,"value":211},"export",{"type":61,"tag":145,"props":213,"children":214},{"style":152},[215],{"type":72,"value":216}," default",{"type":61,"tag":145,"props":218,"children":220},{"style":219},"--shiki-light:#6182B8;--shiki-default:#82AAFF;--shiki-dark:#82AAFF",[221],{"type":72,"value":222}," eventHandler",{"type":61,"tag":145,"props":224,"children":225},{"style":164},[226],{"type":72,"value":227},"(",{"type":61,"tag":145,"props":229,"children":231},{"style":230},"--shiki-light:#9C3EDA;--shiki-default:#C792EA;--shiki-dark:#C792EA",[232],{"type":72,"value":233},"async",{"type":61,"tag":145,"props":235,"children":236},{"style":158},[237],{"type":72,"value":238}," (",{"type":61,"tag":145,"props":240,"children":242},{"style":241},"--shiki-light:#90A4AE;--shiki-default:#EEFFFF;--shiki-dark:#BABED8;--shiki-light-font-style:italic;--shiki-default-font-style:italic;--shiki-dark-font-style:italic",[243],{"type":72,"value":244},"event",{"type":61,"tag":145,"props":246,"children":247},{"style":158},[248],{"type":72,"value":249},")",{"type":61,"tag":145,"props":251,"children":252},{"style":230},[253],{"type":72,"value":254}," =>",{"type":61,"tag":145,"props":256,"children":257},{"style":158},[258],{"type":72,"value":259}," {\n",{"type":61,"tag":145,"props":261,"children":263},{"class":147,"line":262},4,[264,269,274,279,284,288,293,297],{"type":61,"tag":145,"props":265,"children":266},{"style":230},[267],{"type":72,"value":268},"  const",{"type":61,"tag":145,"props":270,"children":271},{"style":164},[272],{"type":72,"value":273}," client",{"type":61,"tag":145,"props":275,"children":276},{"style":158},[277],{"type":72,"value":278}," =",{"type":61,"tag":145,"props":280,"children":281},{"style":152},[282],{"type":72,"value":283}," await",{"type":61,"tag":145,"props":285,"children":286},{"style":219},[287],{"type":72,"value":167},{"type":61,"tag":145,"props":289,"children":291},{"style":290},"--shiki-light:#E53935;--shiki-default:#F07178;--shiki-dark:#F07178",[292],{"type":72,"value":227},{"type":61,"tag":145,"props":294,"children":295},{"style":164},[296],{"type":72,"value":244},{"type":61,"tag":145,"props":298,"children":299},{"style":290},[300],{"type":72,"value":301},")\n",{"type":61,"tag":145,"props":303,"children":305},{"class":147,"line":304},5,[306],{"type":61,"tag":145,"props":307,"children":308},{"emptyLinePlaceholder":199},[309],{"type":72,"value":202},{"type":61,"tag":145,"props":311,"children":313},{"class":147,"line":312},6,[314,318,322,327,331,335,339,343,347,352,356,361,366,370,374,378,383,387,391,396,400],{"type":61,"tag":145,"props":315,"children":316},{"style":230},[317],{"type":72,"value":268},{"type":61,"tag":145,"props":319,"children":320},{"style":158},[321],{"type":72,"value":161},{"type":61,"tag":145,"props":323,"children":324},{"style":164},[325],{"type":72,"value":326}," data",{"type":61,"tag":145,"props":328,"children":329},{"style":158},[330],{"type":72,"value":172},{"type":61,"tag":145,"props":332,"children":333},{"style":158},[334],{"type":72,"value":278},{"type":61,"tag":145,"props":336,"children":337},{"style":152},[338],{"type":72,"value":283},{"type":61,"tag":145,"props":340,"children":341},{"style":164},[342],{"type":72,"value":273},{"type":61,"tag":145,"props":344,"children":345},{"style":158},[346],{"type":72,"value":104},{"type":61,"tag":145,"props":348,"children":349},{"style":219},[350],{"type":72,"value":351},"from",{"type":61,"tag":145,"props":353,"children":354},{"style":290},[355],{"type":72,"value":227},{"type":61,"tag":145,"props":357,"children":358},{"style":158},[359],{"type":72,"value":360},"'",{"type":61,"tag":145,"props":362,"children":363},{"style":185},[364],{"type":72,"value":365},"libraries",{"type":61,"tag":145,"props":367,"children":368},{"style":158},[369],{"type":72,"value":360},{"type":61,"tag":145,"props":371,"children":372},{"style":290},[373],{"type":72,"value":249},{"type":61,"tag":145,"props":375,"children":376},{"style":158},[377],{"type":72,"value":104},{"type":61,"tag":145,"props":379,"children":380},{"style":219},[381],{"type":72,"value":382},"select",{"type":61,"tag":145,"props":384,"children":385},{"style":290},[386],{"type":72,"value":227},{"type":61,"tag":145,"props":388,"children":389},{"style":158},[390],{"type":72,"value":360},{"type":61,"tag":145,"props":392,"children":393},{"style":185},[394],{"type":72,"value":395},"*",{"type":61,"tag":145,"props":397,"children":398},{"style":158},[399],{"type":72,"value":360},{"type":61,"tag":145,"props":401,"children":402},{"style":290},[403],{"type":72,"value":301},{"type":61,"tag":145,"props":405,"children":407},{"class":147,"line":406},7,[408],{"type":61,"tag":145,"props":409,"children":410},{"emptyLinePlaceholder":199},[411],{"type":72,"value":202},{"type":61,"tag":145,"props":413,"children":415},{"class":147,"line":414},8,[416,421,425,430,435,439],{"type":61,"tag":145,"props":417,"children":418},{"style":152},[419],{"type":72,"value":420},"  return",{"type":61,"tag":145,"props":422,"children":423},{"style":158},[424],{"type":72,"value":161},{"type":61,"tag":145,"props":426,"children":427},{"style":290},[428],{"type":72,"value":429}," libraries",{"type":61,"tag":145,"props":431,"children":432},{"style":158},[433],{"type":72,"value":434},":",{"type":61,"tag":145,"props":436,"children":437},{"style":164},[438],{"type":72,"value":326},{"type":61,"tag":145,"props":440,"children":441},{"style":158},[442],{"type":72,"value":443}," }\n",{"type":61,"tag":145,"props":445,"children":447},{"class":147,"line":446},9,[448,453],{"type":61,"tag":145,"props":449,"children":450},{"style":158},[451],{"type":72,"value":452},"}",{"type":61,"tag":145,"props":454,"children":455},{"style":164},[456],{"type":72,"value":301},{"type":61,"tag":68,"props":458,"children":459},{},[460],{"type":72,"value":461},"Then call your API route from any vue file:",{"type":61,"tag":134,"props":463,"children":466},{"className":136,"code":464,"filename":465,"language":139,"meta":55,"style":55},"const fetchLibrary = async () => {\n  const { libraries } = await $fetch('/api/libraries')\n}\n","pages/index.vue",[467],{"type":61,"tag":111,"props":468,"children":469},{"__ignoreMap":55},[470,506,559],{"type":61,"tag":145,"props":471,"children":472},{"class":147,"line":148},[473,478,483,488,493,498,502],{"type":61,"tag":145,"props":474,"children":475},{"style":230},[476],{"type":72,"value":477},"const",{"type":61,"tag":145,"props":479,"children":480},{"style":164},[481],{"type":72,"value":482}," fetchLibrary ",{"type":61,"tag":145,"props":484,"children":485},{"style":158},[486],{"type":72,"value":487},"=",{"type":61,"tag":145,"props":489,"children":490},{"style":230},[491],{"type":72,"value":492}," async",{"type":61,"tag":145,"props":494,"children":495},{"style":158},[496],{"type":72,"value":497}," ()",{"type":61,"tag":145,"props":499,"children":500},{"style":230},[501],{"type":72,"value":254},{"type":61,"tag":145,"props":503,"children":504},{"style":158},[505],{"type":72,"value":259},{"type":61,"tag":145,"props":507,"children":508},{"class":147,"line":195},[509,513,517,521,525,529,533,538,542,546,551,555],{"type":61,"tag":145,"props":510,"children":511},{"style":230},[512],{"type":72,"value":268},{"type":61,"tag":145,"props":514,"children":515},{"style":158},[516],{"type":72,"value":161},{"type":61,"tag":145,"props":518,"children":519},{"style":164},[520],{"type":72,"value":429},{"type":61,"tag":145,"props":522,"children":523},{"style":158},[524],{"type":72,"value":172},{"type":61,"tag":145,"props":526,"children":527},{"style":158},[528],{"type":72,"value":278},{"type":61,"tag":145,"props":530,"children":531},{"style":152},[532],{"type":72,"value":283},{"type":61,"tag":145,"props":534,"children":535},{"style":219},[536],{"type":72,"value":537}," $fetch",{"type":61,"tag":145,"props":539,"children":540},{"style":290},[541],{"type":72,"value":227},{"type":61,"tag":145,"props":543,"children":544},{"style":158},[545],{"type":72,"value":360},{"type":61,"tag":145,"props":547,"children":548},{"style":185},[549],{"type":72,"value":550},"/api/libraries",{"type":61,"tag":145,"props":552,"children":553},{"style":158},[554],{"type":72,"value":360},{"type":61,"tag":145,"props":556,"children":557},{"style":290},[558],{"type":72,"value":301},{"type":61,"tag":145,"props":560,"children":561},{"class":147,"line":205},[562],{"type":61,"tag":145,"props":563,"children":564},{"style":158},[565],{"type":72,"value":566},"}\n",{"type":61,"tag":68,"props":568,"children":569},{},[570,572,579],{"type":72,"value":571},"Be careful, if you want to call this route on SSR, please read this ",{"type":61,"tag":75,"props":573,"children":576},{"href":574,"rel":575},"https://nuxt.com/docs/getting-started/data-fetching#isomorphic-fetch-and-fetch",[79],[577],{"type":72,"value":578},"section",{"type":72,"value":580},", you must send your browser cookies including your supabase token.",{"type":61,"tag":134,"props":582,"children":584},{"className":136,"code":583,"filename":465,"language":139,"meta":55,"style":55},"const { data: { libraries }} = await useFetch('/api/libraries', {\n  headers: useRequestHeaders(['cookie'])\n})\n",[585],{"type":61,"tag":111,"props":586,"children":587},{"__ignoreMap":55},[588,659,699],{"type":61,"tag":145,"props":589,"children":590},{"class":147,"line":148},[591,595,599,603,607,611,616,621,625,629,634,638,642,646,650,655],{"type":61,"tag":145,"props":592,"children":593},{"style":230},[594],{"type":72,"value":477},{"type":61,"tag":145,"props":596,"children":597},{"style":158},[598],{"type":72,"value":161},{"type":61,"tag":145,"props":600,"children":601},{"style":290},[602],{"type":72,"value":326},{"type":61,"tag":145,"props":604,"children":605},{"style":158},[606],{"type":72,"value":434},{"type":61,"tag":145,"props":608,"children":609},{"style":158},[610],{"type":72,"value":161},{"type":61,"tag":145,"props":612,"children":613},{"style":164},[614],{"type":72,"value":615}," libraries ",{"type":61,"tag":145,"props":617,"children":618},{"style":158},[619],{"type":72,"value":620},"}}",{"type":61,"tag":145,"props":622,"children":623},{"style":158},[624],{"type":72,"value":278},{"type":61,"tag":145,"props":626,"children":627},{"style":152},[628],{"type":72,"value":283},{"type":61,"tag":145,"props":630,"children":631},{"style":219},[632],{"type":72,"value":633}," useFetch",{"type":61,"tag":145,"props":635,"children":636},{"style":164},[637],{"type":72,"value":227},{"type":61,"tag":145,"props":639,"children":640},{"style":158},[641],{"type":72,"value":360},{"type":61,"tag":145,"props":643,"children":644},{"style":185},[645],{"type":72,"value":550},{"type":61,"tag":145,"props":647,"children":648},{"style":158},[649],{"type":72,"value":360},{"type":61,"tag":145,"props":651,"children":652},{"style":158},[653],{"type":72,"value":654},",",{"type":61,"tag":145,"props":656,"children":657},{"style":158},[658],{"type":72,"value":259},{"type":61,"tag":145,"props":660,"children":661},{"class":147,"line":195},[662,667,671,676,681,685,690,694],{"type":61,"tag":145,"props":663,"children":664},{"style":290},[665],{"type":72,"value":666},"  headers",{"type":61,"tag":145,"props":668,"children":669},{"style":158},[670],{"type":72,"value":434},{"type":61,"tag":145,"props":672,"children":673},{"style":219},[674],{"type":72,"value":675}," useRequestHeaders",{"type":61,"tag":145,"props":677,"children":678},{"style":164},[679],{"type":72,"value":680},"([",{"type":61,"tag":145,"props":682,"children":683},{"style":158},[684],{"type":72,"value":360},{"type":61,"tag":145,"props":686,"children":687},{"style":185},[688],{"type":72,"value":689},"cookie",{"type":61,"tag":145,"props":691,"children":692},{"style":158},[693],{"type":72,"value":360},{"type":61,"tag":145,"props":695,"children":696},{"style":164},[697],{"type":72,"value":698},"])\n",{"type":61,"tag":145,"props":700,"children":701},{"class":147,"line":205},[702,706],{"type":61,"tag":145,"props":703,"children":704},{"style":158},[705],{"type":72,"value":452},{"type":61,"tag":145,"props":707,"children":708},{"style":164},[709],{"type":72,"value":301},{"type":61,"tag":711,"props":712,"children":713},"style",{},[714],{"type":72,"value":715},"html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html.light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html .light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}",{"title":55,"searchDepth":195,"depth":195,"links":717},[],"markdown","content:4.usage:services:1.serverSupabaseClient.md","content","4.usage/services/1.serverSupabaseClient.md","md",[724,726],{"_path":25,"title":24,"description":725},"Auto import and use your Supabase user with the useSupabaseUser composable",{"_path":35,"title":727,"description":728},"serverServiceRole","Make requests with super admin rights to the Supabase API with the serverSupabaseServiceRole service",1706280924377]