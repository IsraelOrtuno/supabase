[{"data":1,"prerenderedAt":727},["Reactive",2],{"navigation":3,"/usage/services/serversupabaseclient":52,"/usage/services/serversupabaseclient-surround":721},[4,8,12,40,44,48],{"title":5,"_path":6,"icon":7},"Get Started","/get-started","heroicons:rocket-launch",{"title":9,"_path":10,"icon":11},"Authentication","/authentication","heroicons:lock-closed",{"title":13,"_path":14,"children":15,"icon":39},"Usage","/usage",[16,26],{"title":17,"_path":18,"children":19},"Vue composables","/usage/composables",[20,23],{"title":21,"_path":22},"UseSupabaseClient","/usage/composables/usesupabaseclient",{"title":24,"_path":25},"UseSupabaseUser","/usage/composables/usesupabaseuser",{"title":27,"_path":28,"children":29},"Server services","/usage/services",[30,33,36],{"title":31,"_path":32},"serverSupabaseClient","/usage/services/serversupabaseclient",{"title":34,"_path":35},"serverSupabaseServiceRole","/usage/services/serversupabaseservicerole",{"title":37,"_path":38},"serverSupabaseUser","/usage/services/serversupabaseuser","heroicons:book-open",{"title":41,"_path":42,"icon":43},"Demo","/demo","heroicons:computer-desktop-20-solid",{"title":45,"_path":46,"icon":47},"Changelog","/changelog","heroicons:bookmark",{"title":49,"_path":50,"icon":51},"Roadmap","/roadmap","heroicons:map",{"_path":32,"_dir":53,"_draft":54,"_partial":54,"_locale":55,"title":31,"description":56,"body":57,"_type":716,"_id":717,"_source":718,"_file":719,"_extension":720},"services",false,"","Make requests to the Supabase API on server side with the serverSupabaseClient service",{"type":58,"children":59,"toc":714},"root",[60,85,106,131,455,460,565,579,708],{"type":61,"tag":62,"props":63,"children":66},"element","callout",{"color":64,"icon":65},"amber","i-heroicons-exclamation-triangle-20-solid",[67],{"type":61,"tag":68,"props":69,"children":70},"p",{},[71,74,83],{"type":72,"value":73},"text","This section assumes you're familiar with ",{"type":61,"tag":75,"props":76,"children":80},"a",{"href":77,"rel":78},"https://v3.nuxtjs.org/guide/concepts/server-engine",[79],"nofollow",[81],{"type":72,"value":82},"Nitro",{"type":72,"value":84},", the server engine powered by Nuxt.",{"type":61,"tag":68,"props":86,"children":87},{},[88,90,95,97,104],{"type":72,"value":89},"This function is working similary as the ",{"type":61,"tag":75,"props":91,"children":92},{"href":22},[93],{"type":72,"value":94},"useSupabaseClient",{"type":72,"value":96}," composable but is designed to be used in ",{"type":61,"tag":75,"props":98,"children":101},{"href":99,"rel":100},"https://nuxt.com/docs/guide/directory-structure/server#server-routes",[79],[102],{"type":72,"value":103},"server routes",{"type":72,"value":105},".",{"type":61,"tag":68,"props":107,"children":108},{},[109,111,116,118,123,125,129],{"type":72,"value":110},"Define your server route and just import the ",{"type":61,"tag":112,"props":113,"children":114},"code",{"className":55},[115],{"type":72,"value":31},{"type":72,"value":117}," from ",{"type":61,"tag":112,"props":119,"children":120},{"className":55},[121],{"type":72,"value":122},"#supabase/server",{"type":72,"value":124},". Be careful,  ",{"type":61,"tag":112,"props":126,"children":127},{"className":55},[128],{"type":72,"value":31},{"type":72,"value":130}," is returning a promise.",{"type":61,"tag":132,"props":133,"children":138},"pre",{"className":134,"code":135,"filename":136,"language":137,"meta":55,"style":55},"language-ts shiki shiki-themes material-theme-lighter material-theme material-theme-palenight","import { serverSupabaseClient } from '#supabase/server'\n\nexport default eventHandler(async (event) => {\n  const client = await serverSupabaseClient(event)\n\n  const { data } = await client.from('libraries').select('*')\n\n  return { libraries: data }\n})\n","server/api/libraries.ts","ts",[139],{"type":61,"tag":112,"props":140,"children":141},{"__ignoreMap":55},[142,191,201,258,300,308,402,410,442],{"type":61,"tag":143,"props":144,"children":147},"span",{"class":145,"line":146},"line",1,[148,154,160,166,171,176,181,186],{"type":61,"tag":143,"props":149,"children":151},{"style":150},"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF;--shiki-light-font-style:italic;--shiki-default-font-style:italic;--shiki-dark-font-style:italic",[152],{"type":72,"value":153},"import",{"type":61,"tag":143,"props":155,"children":157},{"style":156},"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF",[158],{"type":72,"value":159}," {",{"type":61,"tag":143,"props":161,"children":163},{"style":162},"--shiki-light:#90A4AE;--shiki-default:#EEFFFF;--shiki-dark:#BABED8",[164],{"type":72,"value":165}," serverSupabaseClient",{"type":61,"tag":143,"props":167,"children":168},{"style":156},[169],{"type":72,"value":170}," }",{"type":61,"tag":143,"props":172,"children":173},{"style":150},[174],{"type":72,"value":175}," from",{"type":61,"tag":143,"props":177,"children":178},{"style":156},[179],{"type":72,"value":180}," '",{"type":61,"tag":143,"props":182,"children":184},{"style":183},"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D",[185],{"type":72,"value":122},{"type":61,"tag":143,"props":187,"children":188},{"style":156},[189],{"type":72,"value":190},"'\n",{"type":61,"tag":143,"props":192,"children":194},{"class":145,"line":193},2,[195],{"type":61,"tag":143,"props":196,"children":198},{"emptyLinePlaceholder":197},true,[199],{"type":72,"value":200},"\n",{"type":61,"tag":143,"props":202,"children":204},{"class":145,"line":203},3,[205,210,215,221,226,232,237,243,248,253],{"type":61,"tag":143,"props":206,"children":207},{"style":150},[208],{"type":72,"value":209},"export",{"type":61,"tag":143,"props":211,"children":212},{"style":150},[213],{"type":72,"value":214}," default",{"type":61,"tag":143,"props":216,"children":218},{"style":217},"--shiki-light:#6182B8;--shiki-default:#82AAFF;--shiki-dark:#82AAFF",[219],{"type":72,"value":220}," eventHandler",{"type":61,"tag":143,"props":222,"children":223},{"style":162},[224],{"type":72,"value":225},"(",{"type":61,"tag":143,"props":227,"children":229},{"style":228},"--shiki-light:#9C3EDA;--shiki-default:#C792EA;--shiki-dark:#C792EA",[230],{"type":72,"value":231},"async",{"type":61,"tag":143,"props":233,"children":234},{"style":156},[235],{"type":72,"value":236}," (",{"type":61,"tag":143,"props":238,"children":240},{"style":239},"--shiki-light:#90A4AE;--shiki-default:#EEFFFF;--shiki-dark:#BABED8;--shiki-light-font-style:italic;--shiki-default-font-style:italic;--shiki-dark-font-style:italic",[241],{"type":72,"value":242},"event",{"type":61,"tag":143,"props":244,"children":245},{"style":156},[246],{"type":72,"value":247},")",{"type":61,"tag":143,"props":249,"children":250},{"style":228},[251],{"type":72,"value":252}," =>",{"type":61,"tag":143,"props":254,"children":255},{"style":156},[256],{"type":72,"value":257}," {\n",{"type":61,"tag":143,"props":259,"children":261},{"class":145,"line":260},4,[262,267,272,277,282,286,291,295],{"type":61,"tag":143,"props":263,"children":264},{"style":228},[265],{"type":72,"value":266},"  const",{"type":61,"tag":143,"props":268,"children":269},{"style":162},[270],{"type":72,"value":271}," client",{"type":61,"tag":143,"props":273,"children":274},{"style":156},[275],{"type":72,"value":276}," =",{"type":61,"tag":143,"props":278,"children":279},{"style":150},[280],{"type":72,"value":281}," await",{"type":61,"tag":143,"props":283,"children":284},{"style":217},[285],{"type":72,"value":165},{"type":61,"tag":143,"props":287,"children":289},{"style":288},"--shiki-light:#E53935;--shiki-default:#F07178;--shiki-dark:#F07178",[290],{"type":72,"value":225},{"type":61,"tag":143,"props":292,"children":293},{"style":162},[294],{"type":72,"value":242},{"type":61,"tag":143,"props":296,"children":297},{"style":288},[298],{"type":72,"value":299},")\n",{"type":61,"tag":143,"props":301,"children":303},{"class":145,"line":302},5,[304],{"type":61,"tag":143,"props":305,"children":306},{"emptyLinePlaceholder":197},[307],{"type":72,"value":200},{"type":61,"tag":143,"props":309,"children":311},{"class":145,"line":310},6,[312,316,320,325,329,333,337,341,345,350,354,359,364,368,372,376,381,385,389,394,398],{"type":61,"tag":143,"props":313,"children":314},{"style":228},[315],{"type":72,"value":266},{"type":61,"tag":143,"props":317,"children":318},{"style":156},[319],{"type":72,"value":159},{"type":61,"tag":143,"props":321,"children":322},{"style":162},[323],{"type":72,"value":324}," data",{"type":61,"tag":143,"props":326,"children":327},{"style":156},[328],{"type":72,"value":170},{"type":61,"tag":143,"props":330,"children":331},{"style":156},[332],{"type":72,"value":276},{"type":61,"tag":143,"props":334,"children":335},{"style":150},[336],{"type":72,"value":281},{"type":61,"tag":143,"props":338,"children":339},{"style":162},[340],{"type":72,"value":271},{"type":61,"tag":143,"props":342,"children":343},{"style":156},[344],{"type":72,"value":105},{"type":61,"tag":143,"props":346,"children":347},{"style":217},[348],{"type":72,"value":349},"from",{"type":61,"tag":143,"props":351,"children":352},{"style":288},[353],{"type":72,"value":225},{"type":61,"tag":143,"props":355,"children":356},{"style":156},[357],{"type":72,"value":358},"'",{"type":61,"tag":143,"props":360,"children":361},{"style":183},[362],{"type":72,"value":363},"libraries",{"type":61,"tag":143,"props":365,"children":366},{"style":156},[367],{"type":72,"value":358},{"type":61,"tag":143,"props":369,"children":370},{"style":288},[371],{"type":72,"value":247},{"type":61,"tag":143,"props":373,"children":374},{"style":156},[375],{"type":72,"value":105},{"type":61,"tag":143,"props":377,"children":378},{"style":217},[379],{"type":72,"value":380},"select",{"type":61,"tag":143,"props":382,"children":383},{"style":288},[384],{"type":72,"value":225},{"type":61,"tag":143,"props":386,"children":387},{"style":156},[388],{"type":72,"value":358},{"type":61,"tag":143,"props":390,"children":391},{"style":183},[392],{"type":72,"value":393},"*",{"type":61,"tag":143,"props":395,"children":396},{"style":156},[397],{"type":72,"value":358},{"type":61,"tag":143,"props":399,"children":400},{"style":288},[401],{"type":72,"value":299},{"type":61,"tag":143,"props":403,"children":405},{"class":145,"line":404},7,[406],{"type":61,"tag":143,"props":407,"children":408},{"emptyLinePlaceholder":197},[409],{"type":72,"value":200},{"type":61,"tag":143,"props":411,"children":413},{"class":145,"line":412},8,[414,419,423,428,433,437],{"type":61,"tag":143,"props":415,"children":416},{"style":150},[417],{"type":72,"value":418},"  return",{"type":61,"tag":143,"props":420,"children":421},{"style":156},[422],{"type":72,"value":159},{"type":61,"tag":143,"props":424,"children":425},{"style":288},[426],{"type":72,"value":427}," libraries",{"type":61,"tag":143,"props":429,"children":430},{"style":156},[431],{"type":72,"value":432},":",{"type":61,"tag":143,"props":434,"children":435},{"style":162},[436],{"type":72,"value":324},{"type":61,"tag":143,"props":438,"children":439},{"style":156},[440],{"type":72,"value":441}," }\n",{"type":61,"tag":143,"props":443,"children":445},{"class":145,"line":444},9,[446,451],{"type":61,"tag":143,"props":447,"children":448},{"style":156},[449],{"type":72,"value":450},"}",{"type":61,"tag":143,"props":452,"children":453},{"style":162},[454],{"type":72,"value":299},{"type":61,"tag":68,"props":456,"children":457},{},[458],{"type":72,"value":459},"Then call your API route from any vue file:",{"type":61,"tag":132,"props":461,"children":464},{"className":134,"code":462,"filename":463,"language":137,"meta":55,"style":55},"const fetchLibrary = async () => {\n  const { libraries } = await $fetch('/api/libraries')\n}\n","pages/index.vue",[465],{"type":61,"tag":112,"props":466,"children":467},{"__ignoreMap":55},[468,504,557],{"type":61,"tag":143,"props":469,"children":470},{"class":145,"line":146},[471,476,481,486,491,496,500],{"type":61,"tag":143,"props":472,"children":473},{"style":228},[474],{"type":72,"value":475},"const",{"type":61,"tag":143,"props":477,"children":478},{"style":162},[479],{"type":72,"value":480}," fetchLibrary ",{"type":61,"tag":143,"props":482,"children":483},{"style":156},[484],{"type":72,"value":485},"=",{"type":61,"tag":143,"props":487,"children":488},{"style":228},[489],{"type":72,"value":490}," async",{"type":61,"tag":143,"props":492,"children":493},{"style":156},[494],{"type":72,"value":495}," ()",{"type":61,"tag":143,"props":497,"children":498},{"style":228},[499],{"type":72,"value":252},{"type":61,"tag":143,"props":501,"children":502},{"style":156},[503],{"type":72,"value":257},{"type":61,"tag":143,"props":505,"children":506},{"class":145,"line":193},[507,511,515,519,523,527,531,536,540,544,549,553],{"type":61,"tag":143,"props":508,"children":509},{"style":228},[510],{"type":72,"value":266},{"type":61,"tag":143,"props":512,"children":513},{"style":156},[514],{"type":72,"value":159},{"type":61,"tag":143,"props":516,"children":517},{"style":162},[518],{"type":72,"value":427},{"type":61,"tag":143,"props":520,"children":521},{"style":156},[522],{"type":72,"value":170},{"type":61,"tag":143,"props":524,"children":525},{"style":156},[526],{"type":72,"value":276},{"type":61,"tag":143,"props":528,"children":529},{"style":150},[530],{"type":72,"value":281},{"type":61,"tag":143,"props":532,"children":533},{"style":217},[534],{"type":72,"value":535}," $fetch",{"type":61,"tag":143,"props":537,"children":538},{"style":288},[539],{"type":72,"value":225},{"type":61,"tag":143,"props":541,"children":542},{"style":156},[543],{"type":72,"value":358},{"type":61,"tag":143,"props":545,"children":546},{"style":183},[547],{"type":72,"value":548},"/api/libraries",{"type":61,"tag":143,"props":550,"children":551},{"style":156},[552],{"type":72,"value":358},{"type":61,"tag":143,"props":554,"children":555},{"style":288},[556],{"type":72,"value":299},{"type":61,"tag":143,"props":558,"children":559},{"class":145,"line":203},[560],{"type":61,"tag":143,"props":561,"children":562},{"style":156},[563],{"type":72,"value":564},"}\n",{"type":61,"tag":68,"props":566,"children":567},{},[568,570,577],{"type":72,"value":569},"Be careful, if you want to call this route on SSR, please read this ",{"type":61,"tag":75,"props":571,"children":574},{"href":572,"rel":573},"https://nuxt.com/docs/getting-started/data-fetching#isomorphic-fetch-and-fetch",[79],[575],{"type":72,"value":576},"section",{"type":72,"value":578},", you must send your browser cookies including your supabase token.",{"type":61,"tag":132,"props":580,"children":582},{"className":134,"code":581,"filename":463,"language":137,"meta":55,"style":55},"const { data: { libraries }} = await useFetch('/api/libraries', {\n  headers: useRequestHeaders(['cookie'])\n})\n",[583],{"type":61,"tag":112,"props":584,"children":585},{"__ignoreMap":55},[586,657,697],{"type":61,"tag":143,"props":587,"children":588},{"class":145,"line":146},[589,593,597,601,605,609,614,619,623,627,632,636,640,644,648,653],{"type":61,"tag":143,"props":590,"children":591},{"style":228},[592],{"type":72,"value":475},{"type":61,"tag":143,"props":594,"children":595},{"style":156},[596],{"type":72,"value":159},{"type":61,"tag":143,"props":598,"children":599},{"style":288},[600],{"type":72,"value":324},{"type":61,"tag":143,"props":602,"children":603},{"style":156},[604],{"type":72,"value":432},{"type":61,"tag":143,"props":606,"children":607},{"style":156},[608],{"type":72,"value":159},{"type":61,"tag":143,"props":610,"children":611},{"style":162},[612],{"type":72,"value":613}," libraries ",{"type":61,"tag":143,"props":615,"children":616},{"style":156},[617],{"type":72,"value":618},"}}",{"type":61,"tag":143,"props":620,"children":621},{"style":156},[622],{"type":72,"value":276},{"type":61,"tag":143,"props":624,"children":625},{"style":150},[626],{"type":72,"value":281},{"type":61,"tag":143,"props":628,"children":629},{"style":217},[630],{"type":72,"value":631}," useFetch",{"type":61,"tag":143,"props":633,"children":634},{"style":162},[635],{"type":72,"value":225},{"type":61,"tag":143,"props":637,"children":638},{"style":156},[639],{"type":72,"value":358},{"type":61,"tag":143,"props":641,"children":642},{"style":183},[643],{"type":72,"value":548},{"type":61,"tag":143,"props":645,"children":646},{"style":156},[647],{"type":72,"value":358},{"type":61,"tag":143,"props":649,"children":650},{"style":156},[651],{"type":72,"value":652},",",{"type":61,"tag":143,"props":654,"children":655},{"style":156},[656],{"type":72,"value":257},{"type":61,"tag":143,"props":658,"children":659},{"class":145,"line":193},[660,665,669,674,679,683,688,692],{"type":61,"tag":143,"props":661,"children":662},{"style":288},[663],{"type":72,"value":664},"  headers",{"type":61,"tag":143,"props":666,"children":667},{"style":156},[668],{"type":72,"value":432},{"type":61,"tag":143,"props":670,"children":671},{"style":217},[672],{"type":72,"value":673}," useRequestHeaders",{"type":61,"tag":143,"props":675,"children":676},{"style":162},[677],{"type":72,"value":678},"([",{"type":61,"tag":143,"props":680,"children":681},{"style":156},[682],{"type":72,"value":358},{"type":61,"tag":143,"props":684,"children":685},{"style":183},[686],{"type":72,"value":687},"cookie",{"type":61,"tag":143,"props":689,"children":690},{"style":156},[691],{"type":72,"value":358},{"type":61,"tag":143,"props":693,"children":694},{"style":162},[695],{"type":72,"value":696},"])\n",{"type":61,"tag":143,"props":698,"children":699},{"class":145,"line":203},[700,704],{"type":61,"tag":143,"props":701,"children":702},{"style":156},[703],{"type":72,"value":450},{"type":61,"tag":143,"props":705,"children":706},{"style":162},[707],{"type":72,"value":299},{"type":61,"tag":709,"props":710,"children":711},"style",{},[712],{"type":72,"value":713},"html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html.light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html .light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}",{"title":55,"searchDepth":193,"depth":193,"links":715},[],"markdown","content:4.usage:services:1.serverSupabaseClient.md","content","4.usage/services/1.serverSupabaseClient.md","md",[722,724],{"_path":25,"title":24,"description":723},"Auto import and use your Supabase user with the useSupabaseUser composable",{"_path":35,"title":725,"description":726},"serverServiceRole","Make requests with super admin rights to the Supabase API with the serverSupabaseServiceRole service",1700255961887]