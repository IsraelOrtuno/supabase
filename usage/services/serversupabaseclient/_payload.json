[{"data":1,"prerenderedAt":726},["Reactive",2],{"navigation":3,"/usage/services/serversupabaseclient":52,"/usage/services/serversupabaseclient-surround":720},[4,8,12,40,44,48],{"title":5,"_path":6,"icon":7},"Get Started","/get-started","heroicons:rocket-launch",{"title":9,"_path":10,"icon":11},"Authentication","/authentication","heroicons:lock-closed",{"title":13,"_path":14,"children":15,"icon":39},"Usage","/usage",[16,26],{"title":17,"_path":18,"children":19},"Vue composables","/usage/composables",[20,23],{"title":21,"_path":22},"useSupabaseClient","/usage/composables/usesupabaseclient",{"title":24,"_path":25},"useSupabaseUser","/usage/composables/usesupabaseuser",{"title":27,"_path":28,"children":29},"Server services","/usage/services",[30,33,36],{"title":31,"_path":32},"serverSupabaseClient","/usage/services/serversupabaseclient",{"title":34,"_path":35},"serverSupabaseServiceRole","/usage/services/serversupabaseservicerole",{"title":37,"_path":38},"serverSupabaseUser","/usage/services/serversupabaseuser","heroicons:book-open",{"title":41,"_path":42,"icon":43},"Demo","/demo","heroicons:computer-desktop-20-solid",{"title":45,"_path":46,"icon":47},"Changelog","/changelog","heroicons:bookmark",{"title":49,"_path":50,"icon":51},"Roadmap","/roadmap","heroicons:map",{"_path":32,"_dir":53,"_draft":54,"_partial":54,"_locale":55,"title":31,"description":56,"body":57,"_type":715,"_id":716,"_source":717,"_file":718,"_extension":719},"services",false,"","Make requests to the Supabase API on server side with the serverSupabaseClient service",{"type":58,"children":59,"toc":713},"root",[60,85,105,130,454,459,564,578,707],{"type":61,"tag":62,"props":63,"children":66},"element","callout",{"color":64,"icon":65},"amber","i-heroicons-exclamation-triangle-20-solid",[67],{"type":61,"tag":68,"props":69,"children":70},"p",{},[71,74,83],{"type":72,"value":73},"text","This section assumes you're familiar with ",{"type":61,"tag":75,"props":76,"children":80},"a",{"href":77,"rel":78},"https://v3.nuxtjs.org/guide/concepts/server-engine",[79],"nofollow",[81],{"type":72,"value":82},"Nitro",{"type":72,"value":84},", the server engine powered by Nuxt.",{"type":61,"tag":68,"props":86,"children":87},{},[88,90,94,96,103],{"type":72,"value":89},"This function is working similary as the ",{"type":61,"tag":75,"props":91,"children":92},{"href":22},[93],{"type":72,"value":21},{"type":72,"value":95}," composable but is designed to be used in ",{"type":61,"tag":75,"props":97,"children":100},{"href":98,"rel":99},"https://nuxt.com/docs/guide/directory-structure/server#server-routes",[79],[101],{"type":72,"value":102},"server routes",{"type":72,"value":104},".",{"type":61,"tag":68,"props":106,"children":107},{},[108,110,115,117,122,124,128],{"type":72,"value":109},"Define your server route and just import the ",{"type":61,"tag":111,"props":112,"children":113},"code",{"className":55},[114],{"type":72,"value":31},{"type":72,"value":116}," from ",{"type":61,"tag":111,"props":118,"children":119},{"className":55},[120],{"type":72,"value":121},"#supabase/server",{"type":72,"value":123},". Be careful,  ",{"type":61,"tag":111,"props":125,"children":126},{"className":55},[127],{"type":72,"value":31},{"type":72,"value":129}," is returning a promise.",{"type":61,"tag":131,"props":132,"children":137},"pre",{"className":133,"code":134,"filename":135,"language":136,"meta":55,"style":55},"language-ts shiki shiki-themes material-theme-lighter material-theme material-theme-palenight","import { serverSupabaseClient } from '#supabase/server'\n\nexport default eventHandler(async (event) => {\n  const client = await serverSupabaseClient(event)\n\n  const { data } = await client.from('libraries').select('*')\n\n  return { libraries: data }\n})\n","server/api/libraries.ts","ts",[138],{"type":61,"tag":111,"props":139,"children":140},{"__ignoreMap":55},[141,190,200,257,299,307,401,409,441],{"type":61,"tag":142,"props":143,"children":146},"span",{"class":144,"line":145},"line",1,[147,153,159,165,170,175,180,185],{"type":61,"tag":142,"props":148,"children":150},{"style":149},"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF;--shiki-light-font-style:italic;--shiki-default-font-style:italic;--shiki-dark-font-style:italic",[151],{"type":72,"value":152},"import",{"type":61,"tag":142,"props":154,"children":156},{"style":155},"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF",[157],{"type":72,"value":158}," {",{"type":61,"tag":142,"props":160,"children":162},{"style":161},"--shiki-light:#90A4AE;--shiki-default:#EEFFFF;--shiki-dark:#BABED8",[163],{"type":72,"value":164}," serverSupabaseClient",{"type":61,"tag":142,"props":166,"children":167},{"style":155},[168],{"type":72,"value":169}," }",{"type":61,"tag":142,"props":171,"children":172},{"style":149},[173],{"type":72,"value":174}," from",{"type":61,"tag":142,"props":176,"children":177},{"style":155},[178],{"type":72,"value":179}," '",{"type":61,"tag":142,"props":181,"children":183},{"style":182},"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D",[184],{"type":72,"value":121},{"type":61,"tag":142,"props":186,"children":187},{"style":155},[188],{"type":72,"value":189},"'\n",{"type":61,"tag":142,"props":191,"children":193},{"class":144,"line":192},2,[194],{"type":61,"tag":142,"props":195,"children":197},{"emptyLinePlaceholder":196},true,[198],{"type":72,"value":199},"\n",{"type":61,"tag":142,"props":201,"children":203},{"class":144,"line":202},3,[204,209,214,220,225,231,236,242,247,252],{"type":61,"tag":142,"props":205,"children":206},{"style":149},[207],{"type":72,"value":208},"export",{"type":61,"tag":142,"props":210,"children":211},{"style":149},[212],{"type":72,"value":213}," default",{"type":61,"tag":142,"props":215,"children":217},{"style":216},"--shiki-light:#6182B8;--shiki-default:#82AAFF;--shiki-dark:#82AAFF",[218],{"type":72,"value":219}," eventHandler",{"type":61,"tag":142,"props":221,"children":222},{"style":161},[223],{"type":72,"value":224},"(",{"type":61,"tag":142,"props":226,"children":228},{"style":227},"--shiki-light:#9C3EDA;--shiki-default:#C792EA;--shiki-dark:#C792EA",[229],{"type":72,"value":230},"async",{"type":61,"tag":142,"props":232,"children":233},{"style":155},[234],{"type":72,"value":235}," (",{"type":61,"tag":142,"props":237,"children":239},{"style":238},"--shiki-light:#90A4AE;--shiki-default:#EEFFFF;--shiki-dark:#BABED8;--shiki-light-font-style:italic;--shiki-default-font-style:italic;--shiki-dark-font-style:italic",[240],{"type":72,"value":241},"event",{"type":61,"tag":142,"props":243,"children":244},{"style":155},[245],{"type":72,"value":246},")",{"type":61,"tag":142,"props":248,"children":249},{"style":227},[250],{"type":72,"value":251}," =>",{"type":61,"tag":142,"props":253,"children":254},{"style":155},[255],{"type":72,"value":256}," {\n",{"type":61,"tag":142,"props":258,"children":260},{"class":144,"line":259},4,[261,266,271,276,281,285,290,294],{"type":61,"tag":142,"props":262,"children":263},{"style":227},[264],{"type":72,"value":265},"  const",{"type":61,"tag":142,"props":267,"children":268},{"style":161},[269],{"type":72,"value":270}," client",{"type":61,"tag":142,"props":272,"children":273},{"style":155},[274],{"type":72,"value":275}," =",{"type":61,"tag":142,"props":277,"children":278},{"style":149},[279],{"type":72,"value":280}," await",{"type":61,"tag":142,"props":282,"children":283},{"style":216},[284],{"type":72,"value":164},{"type":61,"tag":142,"props":286,"children":288},{"style":287},"--shiki-light:#E53935;--shiki-default:#F07178;--shiki-dark:#F07178",[289],{"type":72,"value":224},{"type":61,"tag":142,"props":291,"children":292},{"style":161},[293],{"type":72,"value":241},{"type":61,"tag":142,"props":295,"children":296},{"style":287},[297],{"type":72,"value":298},")\n",{"type":61,"tag":142,"props":300,"children":302},{"class":144,"line":301},5,[303],{"type":61,"tag":142,"props":304,"children":305},{"emptyLinePlaceholder":196},[306],{"type":72,"value":199},{"type":61,"tag":142,"props":308,"children":310},{"class":144,"line":309},6,[311,315,319,324,328,332,336,340,344,349,353,358,363,367,371,375,380,384,388,393,397],{"type":61,"tag":142,"props":312,"children":313},{"style":227},[314],{"type":72,"value":265},{"type":61,"tag":142,"props":316,"children":317},{"style":155},[318],{"type":72,"value":158},{"type":61,"tag":142,"props":320,"children":321},{"style":161},[322],{"type":72,"value":323}," data",{"type":61,"tag":142,"props":325,"children":326},{"style":155},[327],{"type":72,"value":169},{"type":61,"tag":142,"props":329,"children":330},{"style":155},[331],{"type":72,"value":275},{"type":61,"tag":142,"props":333,"children":334},{"style":149},[335],{"type":72,"value":280},{"type":61,"tag":142,"props":337,"children":338},{"style":161},[339],{"type":72,"value":270},{"type":61,"tag":142,"props":341,"children":342},{"style":155},[343],{"type":72,"value":104},{"type":61,"tag":142,"props":345,"children":346},{"style":216},[347],{"type":72,"value":348},"from",{"type":61,"tag":142,"props":350,"children":351},{"style":287},[352],{"type":72,"value":224},{"type":61,"tag":142,"props":354,"children":355},{"style":155},[356],{"type":72,"value":357},"'",{"type":61,"tag":142,"props":359,"children":360},{"style":182},[361],{"type":72,"value":362},"libraries",{"type":61,"tag":142,"props":364,"children":365},{"style":155},[366],{"type":72,"value":357},{"type":61,"tag":142,"props":368,"children":369},{"style":287},[370],{"type":72,"value":246},{"type":61,"tag":142,"props":372,"children":373},{"style":155},[374],{"type":72,"value":104},{"type":61,"tag":142,"props":376,"children":377},{"style":216},[378],{"type":72,"value":379},"select",{"type":61,"tag":142,"props":381,"children":382},{"style":287},[383],{"type":72,"value":224},{"type":61,"tag":142,"props":385,"children":386},{"style":155},[387],{"type":72,"value":357},{"type":61,"tag":142,"props":389,"children":390},{"style":182},[391],{"type":72,"value":392},"*",{"type":61,"tag":142,"props":394,"children":395},{"style":155},[396],{"type":72,"value":357},{"type":61,"tag":142,"props":398,"children":399},{"style":287},[400],{"type":72,"value":298},{"type":61,"tag":142,"props":402,"children":404},{"class":144,"line":403},7,[405],{"type":61,"tag":142,"props":406,"children":407},{"emptyLinePlaceholder":196},[408],{"type":72,"value":199},{"type":61,"tag":142,"props":410,"children":412},{"class":144,"line":411},8,[413,418,422,427,432,436],{"type":61,"tag":142,"props":414,"children":415},{"style":149},[416],{"type":72,"value":417},"  return",{"type":61,"tag":142,"props":419,"children":420},{"style":155},[421],{"type":72,"value":158},{"type":61,"tag":142,"props":423,"children":424},{"style":287},[425],{"type":72,"value":426}," libraries",{"type":61,"tag":142,"props":428,"children":429},{"style":155},[430],{"type":72,"value":431},":",{"type":61,"tag":142,"props":433,"children":434},{"style":161},[435],{"type":72,"value":323},{"type":61,"tag":142,"props":437,"children":438},{"style":155},[439],{"type":72,"value":440}," }\n",{"type":61,"tag":142,"props":442,"children":444},{"class":144,"line":443},9,[445,450],{"type":61,"tag":142,"props":446,"children":447},{"style":155},[448],{"type":72,"value":449},"}",{"type":61,"tag":142,"props":451,"children":452},{"style":161},[453],{"type":72,"value":298},{"type":61,"tag":68,"props":455,"children":456},{},[457],{"type":72,"value":458},"Then call your API route from any vue file:",{"type":61,"tag":131,"props":460,"children":463},{"className":133,"code":461,"filename":462,"language":136,"meta":55,"style":55},"const fetchLibrary = async () => {\n  const { libraries } = await $fetch('/api/libraries')\n}\n","pages/index.vue",[464],{"type":61,"tag":111,"props":465,"children":466},{"__ignoreMap":55},[467,503,556],{"type":61,"tag":142,"props":468,"children":469},{"class":144,"line":145},[470,475,480,485,490,495,499],{"type":61,"tag":142,"props":471,"children":472},{"style":227},[473],{"type":72,"value":474},"const",{"type":61,"tag":142,"props":476,"children":477},{"style":161},[478],{"type":72,"value":479}," fetchLibrary ",{"type":61,"tag":142,"props":481,"children":482},{"style":155},[483],{"type":72,"value":484},"=",{"type":61,"tag":142,"props":486,"children":487},{"style":227},[488],{"type":72,"value":489}," async",{"type":61,"tag":142,"props":491,"children":492},{"style":155},[493],{"type":72,"value":494}," ()",{"type":61,"tag":142,"props":496,"children":497},{"style":227},[498],{"type":72,"value":251},{"type":61,"tag":142,"props":500,"children":501},{"style":155},[502],{"type":72,"value":256},{"type":61,"tag":142,"props":504,"children":505},{"class":144,"line":192},[506,510,514,518,522,526,530,535,539,543,548,552],{"type":61,"tag":142,"props":507,"children":508},{"style":227},[509],{"type":72,"value":265},{"type":61,"tag":142,"props":511,"children":512},{"style":155},[513],{"type":72,"value":158},{"type":61,"tag":142,"props":515,"children":516},{"style":161},[517],{"type":72,"value":426},{"type":61,"tag":142,"props":519,"children":520},{"style":155},[521],{"type":72,"value":169},{"type":61,"tag":142,"props":523,"children":524},{"style":155},[525],{"type":72,"value":275},{"type":61,"tag":142,"props":527,"children":528},{"style":149},[529],{"type":72,"value":280},{"type":61,"tag":142,"props":531,"children":532},{"style":216},[533],{"type":72,"value":534}," $fetch",{"type":61,"tag":142,"props":536,"children":537},{"style":287},[538],{"type":72,"value":224},{"type":61,"tag":142,"props":540,"children":541},{"style":155},[542],{"type":72,"value":357},{"type":61,"tag":142,"props":544,"children":545},{"style":182},[546],{"type":72,"value":547},"/api/libraries",{"type":61,"tag":142,"props":549,"children":550},{"style":155},[551],{"type":72,"value":357},{"type":61,"tag":142,"props":553,"children":554},{"style":287},[555],{"type":72,"value":298},{"type":61,"tag":142,"props":557,"children":558},{"class":144,"line":202},[559],{"type":61,"tag":142,"props":560,"children":561},{"style":155},[562],{"type":72,"value":563},"}\n",{"type":61,"tag":68,"props":565,"children":566},{},[567,569,576],{"type":72,"value":568},"Be careful, if you want to call this route on SSR, please read this ",{"type":61,"tag":75,"props":570,"children":573},{"href":571,"rel":572},"https://nuxt.com/docs/getting-started/data-fetching#isomorphic-fetch-and-fetch",[79],[574],{"type":72,"value":575},"section",{"type":72,"value":577},", you must send your browser cookies including your supabase token.",{"type":61,"tag":131,"props":579,"children":581},{"className":133,"code":580,"filename":462,"language":136,"meta":55,"style":55},"const { data: { libraries }} = await useFetch('/api/libraries', {\n  headers: useRequestHeaders(['cookie'])\n})\n",[582],{"type":61,"tag":111,"props":583,"children":584},{"__ignoreMap":55},[585,656,696],{"type":61,"tag":142,"props":586,"children":587},{"class":144,"line":145},[588,592,596,600,604,608,613,618,622,626,631,635,639,643,647,652],{"type":61,"tag":142,"props":589,"children":590},{"style":227},[591],{"type":72,"value":474},{"type":61,"tag":142,"props":593,"children":594},{"style":155},[595],{"type":72,"value":158},{"type":61,"tag":142,"props":597,"children":598},{"style":287},[599],{"type":72,"value":323},{"type":61,"tag":142,"props":601,"children":602},{"style":155},[603],{"type":72,"value":431},{"type":61,"tag":142,"props":605,"children":606},{"style":155},[607],{"type":72,"value":158},{"type":61,"tag":142,"props":609,"children":610},{"style":161},[611],{"type":72,"value":612}," libraries ",{"type":61,"tag":142,"props":614,"children":615},{"style":155},[616],{"type":72,"value":617},"}}",{"type":61,"tag":142,"props":619,"children":620},{"style":155},[621],{"type":72,"value":275},{"type":61,"tag":142,"props":623,"children":624},{"style":149},[625],{"type":72,"value":280},{"type":61,"tag":142,"props":627,"children":628},{"style":216},[629],{"type":72,"value":630}," useFetch",{"type":61,"tag":142,"props":632,"children":633},{"style":161},[634],{"type":72,"value":224},{"type":61,"tag":142,"props":636,"children":637},{"style":155},[638],{"type":72,"value":357},{"type":61,"tag":142,"props":640,"children":641},{"style":182},[642],{"type":72,"value":547},{"type":61,"tag":142,"props":644,"children":645},{"style":155},[646],{"type":72,"value":357},{"type":61,"tag":142,"props":648,"children":649},{"style":155},[650],{"type":72,"value":651},",",{"type":61,"tag":142,"props":653,"children":654},{"style":155},[655],{"type":72,"value":256},{"type":61,"tag":142,"props":657,"children":658},{"class":144,"line":192},[659,664,668,673,678,682,687,691],{"type":61,"tag":142,"props":660,"children":661},{"style":287},[662],{"type":72,"value":663},"  headers",{"type":61,"tag":142,"props":665,"children":666},{"style":155},[667],{"type":72,"value":431},{"type":61,"tag":142,"props":669,"children":670},{"style":216},[671],{"type":72,"value":672}," useRequestHeaders",{"type":61,"tag":142,"props":674,"children":675},{"style":161},[676],{"type":72,"value":677},"([",{"type":61,"tag":142,"props":679,"children":680},{"style":155},[681],{"type":72,"value":357},{"type":61,"tag":142,"props":683,"children":684},{"style":182},[685],{"type":72,"value":686},"cookie",{"type":61,"tag":142,"props":688,"children":689},{"style":155},[690],{"type":72,"value":357},{"type":61,"tag":142,"props":692,"children":693},{"style":161},[694],{"type":72,"value":695},"])\n",{"type":61,"tag":142,"props":697,"children":698},{"class":144,"line":202},[699,703],{"type":61,"tag":142,"props":700,"children":701},{"style":155},[702],{"type":72,"value":449},{"type":61,"tag":142,"props":704,"children":705},{"style":161},[706],{"type":72,"value":298},{"type":61,"tag":708,"props":709,"children":710},"style",{},[711],{"type":72,"value":712},"html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html.light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html .light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}",{"title":55,"searchDepth":192,"depth":192,"links":714},[],"markdown","content:4.usage:services:1.serverSupabaseClient.md","content","4.usage/services/1.serverSupabaseClient.md","md",[721,723],{"_path":25,"title":24,"description":722},"Auto import and use your Supabase user with the useSupabaseUser composable",{"_path":35,"title":724,"description":725},"serverServiceRole","Make requests with super admin rights to the Supabase API with the serverSupabaseServiceRole service",1700470457455]